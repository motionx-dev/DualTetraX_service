# DualTetraX Cloud Services - ì•„í‚¤í…ì²˜ ë° ì‹œìŠ¤í…œ ì„¤ê³„ì„œ

**ë²„ì „**: 3.0
**ì‘ì„±ì¼**: 2026-02-08
**ìƒíƒœ**: ì‘ì„± ì¤‘

> **Phase êµ¬ë¶„**:
> - **Phase 1**: ì „ì²´ ì„œë¹„ìŠ¤ â€” Vercelì—ì„œ ì‹œì‘ (ì†Œì…œ ë¡œê·¸ì¸, OTA, ê´€ë¦¬ì ê¸°ëŠ¥, ë””ë°”ì´ìŠ¤ ë¶„ì„ ëª¨ë‘ í¬í•¨)
>   - ì‚¬ìš©ì ì¦ê°€ ì‹œ AWSë¡œ ë¬´ì¤‘ë‹¨ ì „í™˜ (ì•„í‚¤í…ì²˜ëŠ” ë¯¸ë¦¬ ì„¤ê³„)
> - **Phase 2**: AI ê°œì¸í™” ì„œë¹„ìŠ¤ (ML ëª¨ë¸, ì¶”ì²œ ì‹œìŠ¤í…œ)

---

## 1. ì•„í‚¤í…ì²˜ ê°œìš”

### 1.1 ì„¤ê³„ ì›ì¹™

1. **Mobile-First**: ëª¨ë°”ì¼ ì•±ì—ì„œ ëª¨ë“  ê¸°ëŠ¥ ì²˜ë¦¬. ì›¹ì€ ë³´ì¡°(ëŒ€ì‹œë³´ë“œ, ê´€ë¦¬ì ì½˜ì†”).
2. **API-First**: ëª¨ë°”ì¼/ì›¹ ê³µí†µ REST API. í´ë¼ì´ì–¸íŠ¸ ë…ë¦½ì .
3. **ì ì§„ì  í™•ì¥**: Vercel MVP â†’ AWS ì „ê°œ. ì½”ë“œ ë³€ê²½ ìµœì†Œí™”.
4. **ë°ì´í„° ì¼ê´€ì„±**: UUID ê¸°ë°˜ ì¤‘ë³µ ì œê±°. ìµœì¢… ì¼ê´€ì„±(eventual consistency).
5. **ë³´ì•ˆ ìš°ì„ **: RLS, JWT ë¸”ë™ë¦¬ìŠ¤íŠ¸, ì…ë ¥ ê²€ì¦. ëª¨ë“  ê³„ì¸µì—ì„œ ë°©ì–´.

### 1.2 ì „ì²´ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              CLIENTS                                     â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  DualTetraX  â”‚   BLE   â”‚  Mobile App  â”‚  HTTPS  â”‚  Web Browser â”‚     â”‚
â”‚  â”‚   Device     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  (Flutter)   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  (Next.js)   â”‚     â”‚
â”‚  â”‚  (ESP32 FW)  â”‚         â”‚  iOS/Android â”‚         â”‚  Dashboard   â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                  â”‚ REST API                â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           BACKEND SERVICES                               â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    API Gateway / Load Balancer                      â”‚  â”‚
â”‚  â”‚            (Vercel Edge Network / AWS ALB + WAF)                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                               â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Auth       â”‚  â”‚  API Service     â”‚  â”‚ Admin       â”‚  â”‚ Scheduler â”‚  â”‚
â”‚  â”‚ Service    â”‚  â”‚  (Core CRUD)     â”‚  â”‚ Service     â”‚  â”‚ (Cron)    â”‚  â”‚
â”‚  â”‚            â”‚  â”‚                  â”‚  â”‚             â”‚  â”‚           â”‚  â”‚
â”‚  â”‚ - Login    â”‚  â”‚ - Devices        â”‚  â”‚ - Users     â”‚  â”‚ - Stats   â”‚  â”‚
â”‚  â”‚ - Signup   â”‚  â”‚ - Sessions       â”‚  â”‚ - Devices   â”‚  â”‚   Rollup  â”‚  â”‚
â”‚  â”‚ - Logout   â”‚  â”‚ - Statistics     â”‚  â”‚ - Logs      â”‚  â”‚ - Cleanup â”‚  â”‚
â”‚  â”‚ - OAuth    â”‚  â”‚ - Profile        â”‚  â”‚ - Announce  â”‚  â”‚ - Reports â”‚  â”‚
â”‚  â”‚ - 2FA      â”‚  â”‚ - Goals          â”‚  â”‚ - Stats     â”‚  â”‚           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â”‚
â”‚        â”‚                  â”‚                     â”‚               â”‚        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                      SHARED INFRASTRUCTURE                         â”‚  â”‚
â”‚  â”‚                                                                    â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚PostgreSQLâ”‚  â”‚  Redis   â”‚  â”‚  Object  â”‚  â”‚   Notification   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  (DB)    â”‚  â”‚  Cache   â”‚  â”‚  Storage â”‚  â”‚   Service        â”‚  â”‚  â”‚
â”‚  â”‚  â”‚          â”‚  â”‚          â”‚  â”‚  (S3)    â”‚  â”‚   (FCM/APNs)     â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. Phase 1: MVP ì•„í‚¤í…ì²˜ (Vercel + Supabase)

### 2.1 ì¸í”„ë¼ êµ¬ì„±

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Vercel Platform                      â”‚
â”‚                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Frontend        â”‚    â”‚  Backend API              â”‚  â”‚
â”‚  â”‚  (Next.js 14)    â”‚    â”‚  (Vercel Serverless)      â”‚  â”‚
â”‚  â”‚                  â”‚    â”‚                           â”‚  â”‚
â”‚  â”‚  Project:        â”‚    â”‚  Project:                 â”‚  â”‚
â”‚  â”‚  qp-dualtetrax-  â”‚    â”‚  qp-dualtetrax-api       â”‚  â”‚
â”‚  â”‚  web             â”‚    â”‚                           â”‚  â”‚
â”‚  â”‚                  â”‚    â”‚  Runtime: @vercel/node     â”‚  â”‚
â”‚  â”‚  URL:            â”‚    â”‚  URL:                     â”‚  â”‚
â”‚  â”‚  qp-dualtetrax-  â”‚    â”‚  qp-dualtetrax-api.      â”‚  â”‚
â”‚  â”‚  web.vercel.app  â”‚    â”‚  vercel.app               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                      â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                            â”‚                   â”‚
    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
    â”‚ Supabase   â”‚              â”‚ Supabase    â”‚     â”‚  Upstash  â”‚
    â”‚ PostgreSQL â”‚              â”‚ Auth        â”‚     â”‚  Redis    â”‚
    â”‚            â”‚              â”‚             â”‚     â”‚           â”‚
    â”‚ Host:      â”‚              â”‚ Email/PW    â”‚     â”‚ Host:     â”‚
    â”‚ jivpguvy.. â”‚              â”‚ OAuth (P2)  â”‚     â”‚ brave-    â”‚
    â”‚ .supabase  â”‚              â”‚             â”‚     â”‚ poodle-   â”‚
    â”‚ .co        â”‚              â”‚ + Storage   â”‚     â”‚ 38416     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 í™˜ê²½ ë³€ìˆ˜

**Backend (Vercel):**
| ë³€ìˆ˜ | ìš©ë„ | ìƒíƒœ |
|------|------|------|
| SUPABASE_URL | Supabase í”„ë¡œì íŠ¸ URL | ì„¤ì •ë¨ (ì¤„ë°”ê¿ˆ ì´ìŠˆ â†’ .trim() ì ìš©) |
| SUPABASE_ANON_KEY | í”„ë¡ íŠ¸ì—”ë“œìš© í‚¤ (RLS ì ìš©) | ì„¤ì •ë¨ |
| SUPABASE_SERVICE_ROLE_KEY | ë°±ì—”ë“œ ì–´ë“œë¯¼ í‚¤ (RLS ìš°íšŒ) | ì„¤ì •ë¨ |
| UPSTASH_REDIS_REST_URL | Redis REST API URL | ì„¤ì •ë¨ |
| UPSTASH_REDIS_REST_TOKEN | Redis ì¸ì¦ í† í° | ì„¤ì •ë¨ |
| NODE_ENV | ì‹¤í–‰ í™˜ê²½ | production |

**Frontend (Vercel):**
| ë³€ìˆ˜ | ìš©ë„ |
|------|------|
| NEXT_PUBLIC_SUPABASE_URL | Supabase í”„ë¡œì íŠ¸ URL |
| NEXT_PUBLIC_SUPABASE_ANON_KEY | Supabase anon key |
| NEXT_PUBLIC_API_URL | Backend API URL |

### 2.3 MVP API ì—”ë“œí¬ì¸íŠ¸ (í˜„ì¬ êµ¬í˜„)

| Method | Path | ì„¤ëª… | ì¸ì¦ |
|--------|------|------|------|
| GET | /api/health | í—¬ìŠ¤ ì²´í¬ | X |
| GET | /api/ping | í™˜ê²½ë³€ìˆ˜ í™•ì¸ | X |
| POST | /api/auth/logout | JWT ë¸”ë™ë¦¬ìŠ¤íŠ¸ ë“±ë¡ | O |
| GET | /api/devices | ë‚´ ë””ë°”ì´ìŠ¤ ëª©ë¡ | O |
| POST | /api/devices | ë””ë°”ì´ìŠ¤ ë“±ë¡ | O |
| GET | /api/sessions | ì„¸ì…˜ ëª©ë¡ ì¡°íšŒ | O |
| POST | /api/sessions/upload | ì„¸ì…˜ ë°°ì¹˜ ì—…ë¡œë“œ | O |
| GET | /api/stats/daily | ì¼ë³„ í†µê³„ | O |
| GET | /api/stats/range | ê¸°ê°„ë³„ í†µê³„ | O |

### 2.4 MVP í•œê³„ì  ë° AWS ì „í™˜ ì´ìœ 

| í•­ëª© | Vercel MVP | AWS Phase 2 |
|------|-----------|-------------|
| Cold Start | ìˆìŒ (~500ms) | ECS: ì—†ìŒ (ìƒì‹œ êµ¬ë™) |
| ì‹¤í–‰ ì‹œê°„ ì œí•œ | 10ì´ˆ (Hobby) | ì œí•œ ì—†ìŒ |
| ë™ì‹œ ì²˜ë¦¬ | ì œí•œì  | ECS ì˜¤í† ìŠ¤ì¼€ì¼ë§ |
| ìŠ¤ì¼€ì¤„ëŸ¬ | Vercel Cron (Hobby ë¶ˆê°€) | EventBridge + Lambda |
| WebSocket | ë¯¸ì§€ì› | ALB + ECS |
| íŒŒì¼ ì—…ë¡œë“œ | ì œí•œì  | S3 + CloudFront |
| Rate Limiting | Vercel ê¸°ë³¸ë§Œ | API Gateway ì»¤ìŠ¤í…€ |
| DB ì—°ê²° í’€ë§ | Supabase Pooler | RDS Proxy |

---

## 3. Phase 2: AWS í”„ë¡œë•ì…˜ ì•„í‚¤í…ì²˜

### 3.1 AWS ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨

```
                                Internet
                                   â”‚
                           â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
                           â”‚  Route 53     â”‚
                           â”‚  DNS          â”‚
                           â”‚               â”‚
                           â”‚  api.dualtetraâ”‚
                           â”‚  x.com        â”‚
                           â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                           â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
                           â”‚  CloudFront   â”‚  â† ì •ì  ìì‚° CDN
                           â”‚  (CDN)        â”‚
                           â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                           â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
                           â”‚  AWS WAF      â”‚  â† DDoS/Rate Limiting
                           â”‚               â”‚
                           â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚              â”‚               â”‚
             â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
             â”‚  ALB       â”‚ â”‚  ALB       â”‚ â”‚  S3        â”‚
             â”‚  (API)     â”‚ â”‚  (Web)     â”‚ â”‚  (Static)  â”‚
             â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚             â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚         â”‚     VPC     â”‚         â”‚
          â”‚         â”‚             â”‚         â”‚
          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”‚
          â”‚  â”‚  ECS Fargate â”‚ â”‚  ECS     â”‚  â”‚
          â”‚  â”‚  API Service â”‚ â”‚  Web     â”‚  â”‚
          â”‚  â”‚  (3 tasks)   â”‚ â”‚  (2 tasksâ”‚  â”‚
          â”‚  â”‚              â”‚ â”‚  )       â”‚  â”‚
          â”‚  â”‚  - Auth      â”‚ â”‚  Next.js â”‚  â”‚
          â”‚  â”‚  - CRUD API  â”‚ â”‚  SSR     â”‚  â”‚
          â”‚  â”‚  - Admin API â”‚ â”‚          â”‚  â”‚
          â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
          â”‚         â”‚                       â”‚
          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”                â”‚
          â”‚  â”‚  ECS Fargate â”‚                â”‚
          â”‚  â”‚  Worker      â”‚ â† ë¹„ë™ê¸° ì‘ì—…  â”‚
          â”‚  â”‚  (1 task)    â”‚                â”‚
          â”‚  â”‚              â”‚                â”‚
          â”‚  â”‚  - Stats     â”‚                â”‚
          â”‚  â”‚    Rollup    â”‚                â”‚
          â”‚  â”‚  - Reports   â”‚                â”‚
          â”‚  â”‚  - Cleanup   â”‚                â”‚
          â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
          â”‚         â”‚                       â”‚
          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
          â”‚  â”‚      â”‚  Private Subnets  â”‚   â”‚
          â”‚  â”‚      â”‚                   â”‚   â”‚
          â”‚  â”‚  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”‚   â”‚
          â”‚  â”‚  â”‚  RDS     â”‚ â”‚ Elasti-â”‚â”‚   â”‚
          â”‚  â”‚  â”‚  Aurora  â”‚ â”‚ Cache  â”‚â”‚   â”‚
          â”‚  â”‚  â”‚  PG 16   â”‚ â”‚ Redis  â”‚â”‚   â”‚
          â”‚  â”‚  â”‚          â”‚ â”‚  7.x   â”‚â”‚   â”‚
          â”‚  â”‚  â”‚  Primary â”‚ â”‚        â”‚â”‚   â”‚
          â”‚  â”‚  â”‚  + Read  â”‚ â”‚        â”‚â”‚   â”‚
          â”‚  â”‚  â”‚  Replica â”‚ â”‚        â”‚â”‚   â”‚
          â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚   â”‚
          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
          â”‚                                â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

External Services:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  FCM     â”‚  â”‚  APNs    â”‚  â”‚  SES     â”‚
  â”‚  (Push)  â”‚  â”‚  (Push)  â”‚  â”‚  (Email) â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 ì„œë¹„ìŠ¤ ë¶„ë¦¬ ë° ì—­í• 

| ì„œë¹„ìŠ¤ | ëŸ°íƒ€ì„ | ì—­í•  | ìŠ¤ì¼€ì¼ë§ |
|--------|--------|------|---------|
| **API Service** | ECS Fargate (Node.js) | Core CRUD, Auth, Profile, Stats | 3~10 tasks (CPU ê¸°ë°˜) |
| **Web Service** | ECS Fargate (Next.js) | SSR, ì •ì  í˜ì´ì§€ | 2~5 tasks |
| **Worker Service** | ECS Fargate (Node.js) | ë¹„ë™ê¸° ì‘ì—… (í†µê³„ ë¡¤ì—…, ë¦¬í¬íŠ¸, ì •ë¦¬) | 1~3 tasks |
| **Scheduler** | EventBridge + Lambda | ì£¼ê¸°ì  íŠ¸ë¦¬ê±° | ì„œë²„ë¦¬ìŠ¤ |

### 3.3 ì„œë¹„ìŠ¤ ê°„ í†µì‹  ì„¤ê³„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ì„œë¹„ìŠ¤ ê°„ í†µì‹  íŒ¨í„´                            â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     REST      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚  â”‚ Mobile  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ API      â”‚                     â”‚
â”‚  â”‚ App     â”‚               â”‚ Service  â”‚                     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                                  â”‚                            â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚                    â”‚             â”‚              â”‚            â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”      â”‚
â”‚              â”‚ RDS      â”‚  â”‚ Redis    â”‚  â”‚ SQS      â”‚      â”‚
â”‚              â”‚ (ë™ê¸°)   â”‚  â”‚ (ìºì‹œ)   â”‚  â”‚ (ë¹„ë™ê¸°) â”‚      â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                               â”‚             â”‚
â”‚                                          â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”      â”‚
â”‚                                          â”‚ Worker   â”‚      â”‚
â”‚                                          â”‚ Service  â”‚      â”‚
â”‚                                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                             â”‚
â”‚  í†µì‹  ë°©ì‹:                                                  â”‚
â”‚  1. ë™ê¸° (REST): í´ë¼ì´ì–¸íŠ¸ â†’ API Service â†’ DB              â”‚
â”‚  2. ìºì‹œ: API Service â†” Redis (ì„¸ì…˜, í†µê³„ ìºì‹œ)             â”‚
â”‚  3. ë¹„ë™ê¸° (SQS): API Service â†’ SQS â†’ Worker Service        â”‚
â”‚     - í†µê³„ ì¬ê³„ì‚°                                            â”‚
â”‚     - ì•Œë¦¼ ë°œì†¡                                              â”‚
â”‚     - ë¦¬í¬íŠ¸ ìƒì„±                                            â”‚
â”‚     - ë°ì´í„° ë‚´ë³´ë‚´ê¸°                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.4 ì„œë¹„ìŠ¤ ê°„ í†µì‹  ìƒì„¸

#### 3.4.1 ë™ê¸° í†µì‹  (REST API)
- **í´ë¼ì´ì–¸íŠ¸ â†’ API Service**: ëª¨ë“  ì‚¬ìš©ì ìš”ì²­
- **API Service â†’ RDS**: ì§ì ‘ DB ì¿¼ë¦¬ (RDS Proxy ê²½ìœ )
- **API Service â†’ Redis**: ìºì‹œ ì¡°íšŒ/ì €ì¥, JWT ë¸”ë™ë¦¬ìŠ¤íŠ¸

#### 3.4.2 ë¹„ë™ê¸° í†µì‹  (SQS)
| í | í”„ë¡œë“€ì„œ | ì»¨ìŠˆë¨¸ | ë©”ì‹œì§€ ì˜ˆì‹œ |
|----|---------|--------|-----------|
| `stats-rollup` | API Service | Worker | `{ type: "recalculate", userId, deviceId, date }` |
| `notifications` | API Service | Worker | `{ type: "push", userId, title, body }` |
| `export-jobs` | API Service | Worker | `{ type: "csv", userId, dateRange }` |
| `reports` | Scheduler | Worker | `{ type: "weekly-report", weekStart }` |

#### 3.4.3 ì´ë²¤íŠ¸ ê¸°ë°˜ í†µì‹  (EventBridge)
| ìŠ¤ì¼€ì¤„ | ëŒ€ìƒ | ì„¤ëª… |
|--------|------|------|
| `rate(1 day)` | Lambda â†’ SQS(stats-rollup) | ì¼ë³„ í†µê³„ ë¡¤ì—… íŠ¸ë¦¬ê±° |
| `rate(7 days)` | Lambda â†’ SQS(reports) | ì£¼ê°„ ë¦¬í¬íŠ¸ íŠ¸ë¦¬ê±° |
| `rate(1 day)` | Lambda â†’ Worker | ë§Œë£Œ ë°ì´í„° ì •ë¦¬ |

---

## 4. ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

### 4.1 ER ë‹¤ì´ì–´ê·¸ë¨ (ì „ì²´)

```
auth.users (Supabase ê´€ë¦¬)
    â”‚
    â”œâ”€â”€â”€ 1:1 â”€â”€â–º profiles
    â”‚                â”‚
    â”‚                â”œâ”€â”€â”€ 1:N â”€â”€â–º devices
    â”‚                â”‚                â”‚
    â”‚                â”‚                â”œâ”€â”€â”€ 1:N â”€â”€â–º usage_sessions
    â”‚                â”‚                â”‚                â”‚
    â”‚                â”‚                â”‚                â””â”€â”€â”€ 1:N â”€â”€â–º battery_samples
    â”‚                â”‚                â”‚
    â”‚                â”‚                â””â”€â”€â”€ 1:N â”€â”€â–º device_transfers
    â”‚                â”‚
    â”‚                â”œâ”€â”€â”€ 1:N â”€â”€â–º daily_statistics
    â”‚                â”‚
    â”‚                â”œâ”€â”€â”€ 1:1 â”€â”€â–º notification_settings
    â”‚                â”‚
    â”‚                â”œâ”€â”€â”€ 1:1 â”€â”€â–º skin_profiles
    â”‚                â”‚
    â”‚                â”œâ”€â”€â”€ 1:N â”€â”€â–º user_goals
    â”‚                â”‚
    â”‚                â”œâ”€â”€â”€ 1:N â”€â”€â–º consent_records
    â”‚                â”‚
    â”‚                â””â”€â”€â”€ 1:N â”€â”€â–º recommendations (Phase 3)
    â”‚
    â”œâ”€â”€â”€ (ë…ë¦½) â”€â”€â–º firmware_versions
    â”‚
    â”œâ”€â”€â”€ (ë…ë¦½) â”€â”€â–º firmware_update_history
    â”‚
    â”œâ”€â”€â”€ (ë…ë¦½) â”€â”€â–º announcements
    â”‚
    â””â”€â”€â”€ (ê´€ë¦¬ì) â”€â”€â–º admin_logs
```

### 4.2 í…Œì´ë¸” ëª©ë¡ (15ê°œ)

| # | í…Œì´ë¸” | Phase | ì„¤ëª… |
|---|--------|-------|------|
| 1 | profiles | 1 | ì‚¬ìš©ì í”„ë¡œí•„ |
| 2 | devices | 1 | ë“±ë¡ëœ ë””ë°”ì´ìŠ¤ |
| 3 | usage_sessions | 1 | ì‚¬ìš© ì„¸ì…˜ |
| 4 | battery_samples | 1 | ë°°í„°ë¦¬ ì „ì•• ìƒ˜í”Œ |
| 5 | daily_statistics | 1 | ì¼ë³„ ì§‘ê³„ í†µê³„ |
| 6 | firmware_versions | 1 | íŒì›¨ì–´ ë²„ì „ ëª©ë¡ |
| 7 | consent_records | 1 | ê°œì¸ì •ë³´ ë™ì˜ ì´ë ¥ |
| 8 | notification_settings | 2 | ì•Œë¦¼ ì„¤ì • |
| 9 | skin_profiles | 2 | í”¼ë¶€ í”„ë¡œí•„ |
| 10 | user_goals | 2 | ì‚¬ìš© ëª©í‘œ |
| 11 | device_transfers | 2 | ë””ë°”ì´ìŠ¤ ì†Œìœ ê¶Œ ì´ì „ |
| 12 | firmware_update_history | 2 | íŒì›¨ì–´ ì—…ë°ì´íŠ¸ ì´ë ¥ |
| 13 | announcements | 2 | ê³µì§€ì‚¬í•­ |
| 14 | admin_logs | 2 | ê´€ë¦¬ì ê°ì‚¬ ë¡œê·¸ |
| 15 | recommendations | 3 | AI ì¶”ì²œ |

### 4.3 Phase 1 í…Œì´ë¸” ìƒì„¸ (6 + 1ê°œ)

*ê¸°ì¡´ 6ê°œ í…Œì´ë¸”ì€ 03-schema.sqlì— ì •ì˜ë¨. consent_recordsë¥¼ Phase 1ì— ì¶”ê°€.*

#### consent_records (ì‹ ê·œ - Phase 1)
| ì»¬ëŸ¼ | íƒ€ì… | ì œì•½ì¡°ê±´ | ì„¤ëª… |
|------|------|---------|------|
| id | UUID | PK, DEFAULT gen_random_uuid() | |
| user_id | UUID | FKâ†’profiles, NOT NULL | ì‚¬ìš©ì |
| consent_type | TEXT | NOT NULL | ë™ì˜ ìœ í˜• (terms, privacy, marketing) |
| consented | BOOLEAN | NOT NULL | ë™ì˜ ì—¬ë¶€ |
| ip_address | TEXT | | ë™ì˜ ì‹œ IP |
| user_agent | TEXT | | ë™ì˜ ì‹œ User-Agent |
| created_at | TIMESTAMPTZ | DEFAULT now() | ë™ì˜/ì² íšŒ ì‹œì  |

### 4.4 Phase 2 ì¶”ê°€ í…Œì´ë¸”

#### notification_settings
| ì»¬ëŸ¼ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| id | UUID | PK |
| user_id | UUID | FKâ†’profiles, UNIQUE |
| push_enabled | BOOLEAN | í‘¸ì‹œ ì•Œë¦¼ |
| email_enabled | BOOLEAN | ì´ë©”ì¼ ì•Œë¦¼ |
| usage_reminder | BOOLEAN | ì‚¬ìš© ë¦¬ë§ˆì¸ë” |
| reminder_time | TIME | ë¦¬ë§ˆì¸ë” ì‹œê°„ |
| weekly_report | BOOLEAN | ì£¼ê°„ ë¦¬í¬íŠ¸ |
| marketing | BOOLEAN | ë§ˆì¼€íŒ… ì•Œë¦¼ |

#### skin_profiles
| ì»¬ëŸ¼ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| id | UUID | PK |
| user_id | UUID | FKâ†’profiles, UNIQUE |
| skin_type | TEXT | dry/oily/combination/sensitive |
| concerns | TEXT[] | ê³ ë¯¼ ë°°ì—´ (wrinkles, pores, ...) |
| age_range | TEXT | 20s/30s/40s/50s/60+ |

#### user_goals
| ì»¬ëŸ¼ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| id | UUID | PK |
| user_id | UUID | FKâ†’profiles |
| goal_type | TEXT | daily/weekly/monthly |
| target_minutes | INTEGER | ëª©í‘œ ë¶„ |
| is_active | BOOLEAN | í™œì„± ì—¬ë¶€ |

#### device_transfers
| ì»¬ëŸ¼ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| id | UUID | PK |
| device_id | UUID | FKâ†’devices |
| from_user_id | UUID | FKâ†’profiles |
| to_user_id | UUID | FKâ†’profiles |
| status | TEXT | pending/accepted/rejected |
| requested_at | TIMESTAMPTZ | ìš”ì²­ ì‹œì  |
| resolved_at | TIMESTAMPTZ | ì²˜ë¦¬ ì‹œì  |

#### firmware_update_history
| ì»¬ëŸ¼ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| id | UUID | PK |
| device_id | UUID | FKâ†’devices |
| from_version | TEXT | ì´ì „ ë²„ì „ |
| to_version | TEXT | ì—…ë°ì´íŠ¸ ë²„ì „ |
| status | TEXT | success/failed |
| updated_at | TIMESTAMPTZ | ì—…ë°ì´íŠ¸ ì‹œì  |

#### announcements
| ì»¬ëŸ¼ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| id | UUID | PK |
| title | TEXT | ì œëª© |
| content | TEXT | ë‚´ìš© |
| type | TEXT | info/warning/update |
| is_active | BOOLEAN | í™œì„± ì—¬ë¶€ |
| published_at | TIMESTAMPTZ | ê³µê°œ ì‹œì  |
| created_by | UUID | FKâ†’profiles (admin) |

#### admin_logs
| ì»¬ëŸ¼ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| id | UUID | PK |
| admin_id | UUID | FKâ†’profiles |
| action | TEXT | í–‰ìœ„ (user_update, device_deactivate, ...) |
| target_type | TEXT | user/device/announcement/... |
| target_id | UUID | ëŒ€ìƒ ID |
| details | JSONB | ë³€ê²½ ë‚´ì—­ |
| ip_address | TEXT | ê´€ë¦¬ì IP |
| created_at | TIMESTAMPTZ | í–‰ìœ„ ì‹œì  |

### 4.5 ë³´ì•ˆ ì •ì±… (RLS)

| í…Œì´ë¸” | SELECT | INSERT | UPDATE | DELETE |
|--------|--------|--------|--------|--------|
| profiles | ë³¸ì¸ë§Œ | íŠ¸ë¦¬ê±° ìë™ | ë³¸ì¸ë§Œ | X |
| devices | ë³¸ì¸ ë””ë°”ì´ìŠ¤ | ì¸ì¦ ì‚¬ìš©ì | ë³¸ì¸ ë””ë°”ì´ìŠ¤ | X (ê´€ë¦¬ìë§Œ) |
| usage_sessions | ë³¸ì¸ ì„¸ì…˜ | ì¸ì¦ ì‚¬ìš©ì | X | ë³¸ì¸ ì„¸ì…˜ (Phase 2) |
| battery_samples | ë³¸ì¸ ì„¸ì…˜ì˜ ìƒ˜í”Œ | ì¸ì¦ ì‚¬ìš©ì | X | CASCADE |
| daily_statistics | ë³¸ì¸ í†µê³„ | service_role | service_role | X |
| firmware_versions | ëª¨ë“  ì¸ì¦ ì‚¬ìš©ì | adminë§Œ | adminë§Œ | X |
| consent_records | ë³¸ì¸ë§Œ | ì¸ì¦ ì‚¬ìš©ì | X | X |
| notification_settings | ë³¸ì¸ë§Œ | ë³¸ì¸ë§Œ | ë³¸ì¸ë§Œ | X |
| skin_profiles | ë³¸ì¸ë§Œ | ë³¸ì¸ë§Œ | ë³¸ì¸ë§Œ | X |
| user_goals | ë³¸ì¸ë§Œ | ë³¸ì¸ë§Œ | ë³¸ì¸ë§Œ | ë³¸ì¸ë§Œ |
| device_transfers | ê´€ë ¨ ì‚¬ìš©ì | ì¸ì¦ ì‚¬ìš©ì | ê´€ë ¨ ì‚¬ìš©ì | X |
| announcements | ëª¨ë“  ì¸ì¦ ì‚¬ìš©ì | adminë§Œ | adminë§Œ | adminë§Œ |
| admin_logs | adminë§Œ | adminë§Œ (service_role) | X | X |

---

## 5. Backend API ì„¤ê³„

### 5.1 ê³µí†µ ì‚¬í•­

- **Runtime**: Vercel Node.js (MVP) â†’ ECS Node.js (AWS)
- **ì¸ì¦**: `Authorization: Bearer <supabase-jwt>` â†’ `auth.getUser()` ê²€ì¦
- **ê²€ì¦**: Zod ìŠ¤í‚¤ë§ˆ ê¸°ë°˜ ì…ë ¥ ê²€ì¦
- **ì—ëŸ¬ ì‘ë‹µ**: `{ error: string, details?: any }`
- **CORS**: í—ˆìš©ëœ ë„ë©”ì¸ë§Œ
- **Rate Limiting**: Phase 2ì—ì„œ ì ìš© (ì´ˆë‹¹ 100 ìš”ì²­/IP)

### 5.2 ì „ì²´ API ì—”ë“œí¬ì¸íŠ¸ ëª©ë¡

#### Phase 1 (MVP) â€” í˜„ì¬ êµ¬í˜„ + ì¶”ê°€

| Method | Path | ì„¤ëª… | Phase |
|--------|------|------|-------|
| GET | /api/health | í—¬ìŠ¤ ì²´í¬ | 1 âœ… |
| POST | /api/auth/logout | JWT ë¸”ë™ë¦¬ìŠ¤íŠ¸ | 1 âœ… |
| GET | /api/devices | ë‚´ ë””ë°”ì´ìŠ¤ ëª©ë¡ | 1 âœ… |
| POST | /api/devices | ë””ë°”ì´ìŠ¤ ë“±ë¡ | 1 âœ… |
| GET | /api/sessions | ì„¸ì…˜ ëª©ë¡ ì¡°íšŒ | 1 âœ… |
| POST | /api/sessions/upload | ì„¸ì…˜ ë°°ì¹˜ ì—…ë¡œë“œ | 1 âœ… |
| GET | /api/stats/daily | ì¼ë³„ í†µê³„ | 1 âœ… |
| GET | /api/stats/range | ê¸°ê°„ë³„ í†µê³„ | 1 âœ… |
| **GET** | **/api/profile** | **í”„ë¡œí•„ ì¡°íšŒ** | **1 (ì¶”ê°€)** |
| **PUT** | **/api/profile** | **í”„ë¡œí•„ ì—…ë°ì´íŠ¸** | **1 (ì¶”ê°€)** |
| **GET** | **/api/consent** | **ë™ì˜ ì´ë ¥ ì¡°íšŒ** | **1 (ì¶”ê°€)** |
| **POST** | **/api/consent** | **ë™ì˜ ê¸°ë¡** | **1 (ì¶”ê°€)** |

#### Phase 2 (AWS ì „ê°œ)

| Method | Path | ì„¤ëª… | Phase |
|--------|------|------|-------|
| PUT | /api/devices/:id | ë””ë°”ì´ìŠ¤ ì •ë³´ ìˆ˜ì • | 2 |
| DELETE | /api/devices/:id | ë””ë°”ì´ìŠ¤ ë¹„í™œì„±í™” | 2 |
| POST | /api/devices/:id/transfer | ì†Œìœ ê¶Œ ì´ì „ ìš”ì²­ | 2 |
| PUT | /api/devices/transfer/:id | ì´ì „ ìŠ¹ì¸/ê±°ë¶€ | 2 |
| DELETE | /api/sessions/:id | ì„¸ì…˜ ì‚­ì œ | 2 |
| GET | /api/sessions/export | CSV ë‚´ë³´ë‚´ê¸° | 2 |
| GET | /api/goals | ëª©í‘œ ì¡°íšŒ | 2 |
| POST | /api/goals | ëª©í‘œ ìƒì„± | 2 |
| PUT | /api/goals/:id | ëª©í‘œ ìˆ˜ì • | 2 |
| DELETE | /api/goals/:id | ëª©í‘œ ì‚­ì œ | 2 |
| GET | /api/notifications | ì•Œë¦¼ ì„¤ì • ì¡°íšŒ | 2 |
| PUT | /api/notifications | ì•Œë¦¼ ì„¤ì • ë³€ê²½ | 2 |
| GET | /api/skin-profile | í”¼ë¶€ í”„ë¡œí•„ ì¡°íšŒ | 2 |
| PUT | /api/skin-profile | í”¼ë¶€ í”„ë¡œí•„ ìˆ˜ì • | 2 |
| GET | /api/announcements | ê³µì§€ì‚¬í•­ ëª©ë¡ | 2 |
| GET | /api/admin/users | [ê´€ë¦¬ì] ì‚¬ìš©ì ëª©ë¡ | 2 |
| GET | /api/admin/users/:id | [ê´€ë¦¬ì] ì‚¬ìš©ì ìƒì„¸ | 2 |
| PUT | /api/admin/users/:id | [ê´€ë¦¬ì] ì‚¬ìš©ì ìˆ˜ì • | 2 |
| GET | /api/admin/devices | [ê´€ë¦¬ì] ë””ë°”ì´ìŠ¤ ëª©ë¡ | 2 |
| GET | /api/admin/stats | [ê´€ë¦¬ì] KPI ëŒ€ì‹œë³´ë“œ | 2 |
| GET | /api/admin/logs | [ê´€ë¦¬ì] ê°ì‚¬ ë¡œê·¸ | 2 |
| POST | /api/admin/announcements | [ê´€ë¦¬ì] ê³µì§€ì‚¬í•­ ìƒì„± | 2 |
| PUT | /api/admin/announcements/:id | [ê´€ë¦¬ì] ê³µì§€ì‚¬í•­ ìˆ˜ì • | 2 |
| DELETE | /api/admin/announcements/:id | [ê´€ë¦¬ì] ê³µì§€ì‚¬í•­ ì‚­ì œ | 2 |

### 5.3 ì¸ì¦/ì¸ê°€ í”Œë¡œìš°

```
Mobile App / Web
    â”‚
    â”œâ”€â”€ íšŒì›ê°€ì…: Supabase Auth signUp() â†’ profiles ìë™ ìƒì„± (íŠ¸ë¦¬ê±°)
    â”‚
    â”œâ”€â”€ ë¡œê·¸ì¸: Supabase Auth signInWithPassword() â†’ JWT ë°œê¸‰
    â”‚
    â”œâ”€â”€ API í˜¸ì¶œ: Authorization: Bearer <jwt>
    â”‚     â”‚
    â”‚     â”œâ”€â”€ 1. Redis ë¸”ë™ë¦¬ìŠ¤íŠ¸ í™•ì¸ (bl:<token_hash>)
    â”‚     â”‚     â”œâ”€â”€ ìˆìŒ â†’ 401
    â”‚     â”‚     â””â”€â”€ ì—†ìŒ â†’ ê³„ì†
    â”‚     â”‚
    â”‚     â”œâ”€â”€ 2. Supabase auth.getUser(token) â†’ user_id ì¶”ì¶œ
    â”‚     â”‚     â”œâ”€â”€ ìœ íš¨ â†’ ê³„ì†
    â”‚     â”‚     â””â”€â”€ ë¬´íš¨ â†’ 401
    â”‚     â”‚
    â”‚     â”œâ”€â”€ 3. ê´€ë¦¬ì API: profiles.role === 'admin' í™•ì¸
    â”‚     â”‚     â”œâ”€â”€ admin â†’ í—ˆìš©
    â”‚     â”‚     â””â”€â”€ user â†’ 403
    â”‚     â”‚
    â”‚     â””â”€â”€ 4. RLS ìë™ ì ìš© (user_id ê¸°ë°˜ ë°ì´í„° ê²©ë¦¬)
    â”‚
    â””â”€â”€ ë¡œê·¸ì•„ì›ƒ: POST /api/auth/logout â†’ Redis bl:<hash> ì €ì¥ (TTL=ë‚¨ì€ ìœ íš¨ì‹œê°„)
```

---

## 6. Frontend ì„¤ê³„

### 6.1 ëª¨ë°”ì¼ ì•± (Flutter) â€” Primary

ëª¨ë°”ì¼ ì•±ì´ **ì£¼ìš” ì¸í„°í˜ì´ìŠ¤**. ëª¨ë“  í•µì‹¬ ê¸°ëŠ¥ì€ ëª¨ë°”ì¼ì—ì„œ ì²˜ë¦¬.

**ë©”ì¸ íƒ­ êµ¬ì„± (Bottom Navigation):**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                    â”‚
â”‚           [ í™”ë©´ ë‚´ìš© ]                            â”‚
â”‚                                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ    â”‚  ğŸ“Š   â”‚  ğŸ“±   â”‚  ğŸ‘¤   â”‚  âš™ï¸          â”‚
â”‚  í™ˆ   â”‚  í†µê³„  â”‚ ë””ë°”ì´ìŠ¤â”‚ í”„ë¡œí•„ â”‚  ì„¤ì •        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

| íƒ­ | í™”ë©´ | í•µì‹¬ ê¸°ëŠ¥ |
|----|------|---------|
| í™ˆ | ëŒ€ì‹œë³´ë“œ | ì˜¤ëŠ˜ ì‚¬ìš© ìš”ì•½, ë””ë°”ì´ìŠ¤ ì—°ê²° ìƒíƒœ, ë¹ ë¥¸ ë™ê¸°í™” |
| í†µê³„ | ì¼/ì£¼/ì›” | ì°¨íŠ¸ (ë§‰ëŒ€/íŒŒì´/ë¼ì¸), ê¸°ê°„ ì„ íƒ, ì„¸ì…˜ ëª©ë¡ |
| ë””ë°”ì´ìŠ¤ | ì—°ê²° ê´€ë¦¬ | BLE ì—°ê²°, ë””ë°”ì´ìŠ¤ ì •ë³´, íŒì›¨ì–´ ìƒíƒœ |
| í”„ë¡œí•„ | ë‚´ ì •ë³´ | í”„ë¡œí•„ í¸ì§‘, í”¼ë¶€ í”„ë¡œí•„, ì‚¬ìš© ëª©í‘œ |
| ì„¤ì • | ì•± ì„¤ì • | ì•Œë¦¼, ë™ì˜ ê´€ë¦¬, í…Œë§ˆ, ë°ì´í„° ê´€ë¦¬ |

### 6.2 ì›¹ ëŒ€ì‹œë³´ë“œ (Next.js) â€” Secondary

ì›¹ì€ **ë³´ì¡° ì—­í• **: í° í™”ë©´ì—ì„œ í†µê³„ í™•ì¸, ê´€ë¦¬ì ì½˜ì†”.

**ì‚¬ìš©ì í˜ì´ì§€:**

| ê²½ë¡œ | í˜ì´ì§€ | ì¸ì¦ |
|------|--------|------|
| `/` | ëœë”© í˜ì´ì§€ | X |
| `/login` | ë¡œê·¸ì¸ | X |
| `/signup` | íšŒì›ê°€ì… | X |
| `/reset-password` | ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • | X |
| `/dashboard` | ëŒ€ì‹œë³´ë“œ | O |
| `/devices` | ë””ë°”ì´ìŠ¤ ëª©ë¡ | O |
| `/devices/[id]` | ë””ë°”ì´ìŠ¤ ìƒì„¸ | O |
| `/stats` | í†µê³„ (ì¼/ì£¼/ì›”) | O |
| `/profile` | í”„ë¡œí•„ í¸ì§‘ | O |
| `/settings` | ì„¤ì • | O |

**ê´€ë¦¬ì í˜ì´ì§€ (Phase 2):**

| ê²½ë¡œ | í˜ì´ì§€ |
|------|--------|
| `/admin` | ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ (KPI) |
| `/admin/users` | ì‚¬ìš©ì ê´€ë¦¬ |
| `/admin/users/[id]` | ì‚¬ìš©ì ìƒì„¸ |
| `/admin/devices` | ë””ë°”ì´ìŠ¤ ê´€ë¦¬ |
| `/admin/announcements` | ê³µì§€ì‚¬í•­ ê´€ë¦¬ |
| `/admin/logs` | ê°ì‚¬ ë¡œê·¸ |

### 6.3 ë‹¤í¬ëª¨ë“œ

- **ê¸°ë³¸**: ì‹œìŠ¤í…œ ì„¤ì • ë”°ë¦„ (`prefers-color-scheme`)
- **ìˆ˜ë™**: ThemeToggleë¡œ ì „í™˜
- **ì €ì¥**: `localStorage`
- **êµ¬í˜„**: Tailwind `darkMode: "class"`, `dark:` ìœ í‹¸ë¦¬í‹°

---

## 7. ë³´ì•ˆ ì„¤ê³„

### 7.1 ê³„ì¸µë³„ ë³´ì•ˆ

| ê³„ì¸µ | ë³´ì•ˆ ì¡°ì¹˜ | Phase |
|------|----------|-------|
| ì „ì†¡ | HTTPS (TLS 1.3) | 1 |
| ì¸ì¦ | Supabase Auth JWT | 1 |
| ì„¸ì…˜ | Redis ë¸”ë™ë¦¬ìŠ¤íŠ¸ (ë¡œê·¸ì•„ì›ƒ ì‹œ ì¦‰ì‹œ ë¬´íš¨í™”) | 1 |
| DB ì ‘ê·¼ì œì–´ | Row Level Security | 1 |
| ì…ë ¥ ê²€ì¦ | Zod ìŠ¤í‚¤ë§ˆ | 1 |
| API | Rate Limiting (100 req/s/IP) | 2 |
| ë„¤íŠ¸ì›Œí¬ | VPC Private Subnets (DB, Redis) | 2 |
| WAF | AWS WAF (SQL Injection, XSS, DDoS) | 2 |
| ê°ì‚¬ | admin_logs í…Œì´ë¸” | 2 |
| ì•”í˜¸í™” | RDS ì•”í˜¸í™” at rest, PII í•„ë“œ ì•”í˜¸í™” | 2 |
| ë¹„ë°€ ê´€ë¦¬ | AWS Secrets Manager | 2 |

### 7.2 JWT ê²€ì¦ í”Œë¡œìš°

```
1. Authorization: Bearer <token>
   â†“
2. SHA256(token) â†’ hash â†’ Redis GET bl:<hash>
   â”œâ†’ ì¡´ì¬ â†’ 401 "Token revoked"
   â””â†’ ì—†ìŒ â†’ ê³„ì†
   â†“
3. Supabase auth.getUser(token)
   â”œâ†’ ìœ íš¨ â†’ user_id ì¶”ì¶œ â†’ ìš”ì²­ ì²˜ë¦¬
   â””â†’ ë¬´íš¨ â†’ 401 "Invalid token"
```

### 7.3 í™˜ê²½ ë³€ìˆ˜ ë³´ì•ˆ

- **Git ì œì™¸**: `.env*` íŒŒì¼ì€ `.gitignore`ì— í¬í•¨
- **Vercel**: ëŒ€ì‹œë³´ë“œì—ì„œë§Œ ê´€ë¦¬ (ì¤„ë°”ê¿ˆ ì´ìŠˆ â†’ .trim() ì›Œí¬ì–´ë¼ìš´ë“œ)
- **AWS**: Secrets Manager + ECS Task Definition ì£¼ì…
- **í”„ë¡ íŠ¸ì—”ë“œ**: `NEXT_PUBLIC_` ì ‘ë‘ì‚¬ë§Œ í´ë¼ì´ì–¸íŠ¸ ë…¸ì¶œ (anon_keyë§Œ)

---

## 8. Vercel â†’ AWS ë§ˆì´ê·¸ë ˆì´ì…˜ ì „ëµ

### 8.1 ë§ˆì´ê·¸ë ˆì´ì…˜ ë‹¨ê³„

```
Step 1: AWS ê¸°ë³¸ ì¸í”„ë¼ êµ¬ì¶•
  â”œâ”€â”€ VPC, Subnets, Security Groups
  â”œâ”€â”€ RDS Aurora PostgreSQL (Supabase â†’ RDS ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜)
  â”œâ”€â”€ ElastiCache Redis
  â””â”€â”€ S3 + CloudFront

Step 2: API Service ì´ì „
  â”œâ”€â”€ Docker ì´ë¯¸ì§€ ë¹Œë“œ (ê¸°ì¡´ Vercel ì½”ë“œ ì¬ì‚¬ìš©)
  â”œâ”€â”€ ECS Fargate Task Definition
  â”œâ”€â”€ ALB + Target Group
  â””â”€â”€ DNS ì „í™˜ (api.dualtetrax.com â†’ ALB)

Step 3: Web Service ì´ì „
  â”œâ”€â”€ Next.js Docker ë¹Œë“œ
  â”œâ”€â”€ ECS Fargate
  â””â”€â”€ DNS ì „í™˜

Step 4: Worker Service êµ¬ì¶•
  â”œâ”€â”€ SQS í ìƒì„±
  â”œâ”€â”€ Worker Docker ì´ë¯¸ì§€
  â”œâ”€â”€ EventBridge ìŠ¤ì¼€ì¤„
  â””â”€â”€ ë¹„ë™ê¸° ì‘ì—… ì´ì „

Step 5: Vercel ì œê±°
  â””â”€â”€ DNS ìµœì¢… í™•ì¸ í›„ Vercel í”„ë¡œì íŠ¸ ì‚­ì œ
```

### 8.2 ì½”ë“œ ë³€ê²½ ìµœì†Œí™” ì „ëµ

| ì˜ì—­ | í˜„ì¬ (Vercel) | AWS ì „í™˜ | ì½”ë“œ ë³€ê²½ |
|------|-------------|---------|---------|
| API Runtime | `@vercel/node` handler | Express.js ë˜í¼ | ì–´ëŒ‘í„° ë ˆì´ì–´ ì¶”ê°€ |
| DB Client | Supabase JS SDK | pg Pool ì§ì ‘ ì—°ê²° | DB ë ˆì´ì–´ ì¶”ìƒí™” |
| Redis | @upstash/redis REST | ioredis (TCP) | Redis ë ˆì´ì–´ ì¶”ìƒí™” |
| Auth | Supabase Auth SDK | ì»¤ìŠ¤í…€ JWT ê²€ì¦ ë˜ëŠ” Auth0 | Auth ë ˆì´ì–´ ì¶”ìƒí™” |
| Storage | Supabase Storage | S3 SDK | Storage ë ˆì´ì–´ ì¶”ìƒí™” |

í•µì‹¬: **ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì€ ë³€ê²½ ì—†ìŒ**. ì¸í”„ë¼ ì ‘ê·¼ ë ˆì´ì–´ë§Œ êµì²´.

---

## 9. ëª¨ë‹ˆí„°ë§ ë° ìš´ì˜

### 9.1 MVP (Vercel)

| í•­ëª© | ë„êµ¬ | ë¹„ê³  |
|------|------|------|
| API ë¡œê·¸ | Vercel Logs | ì‹¤ì‹œê°„ ë¡œê·¸ ë·°ì–´ |
| ì—ëŸ¬ ì¶”ì  | Vercel Analytics (ë¬´ë£Œ) | ê¸°ë³¸ ì—ëŸ¬ ë¡œê·¸ |
| ê°€ìš©ì„± | /api/health ì£¼ê¸°ì  ì²´í¬ | ì™¸ë¶€ ëª¨ë‹ˆí„°ë§ (UptimeRobot ë“±) |

### 9.2 AWS (Phase 2)

| í•­ëª© | ë„êµ¬ |
|------|------|
| ë¡œê·¸ | CloudWatch Logs |
| ë©”íŠ¸ë¦­ | CloudWatch Metrics + ëŒ€ì‹œë³´ë“œ |
| ì¶”ì  | AWS X-Ray |
| ì—ëŸ¬ | Sentry (ë˜ëŠ” CloudWatch Alarms) |
| ê°€ìš©ì„± | Route 53 Health Check + SNS ì•Œë¦¼ |
| ë¹„ìš© | AWS Cost Explorer + Budget ì•Œë¦¼ |

---

## 10. êµ¬í˜„ íŒŒì¼ êµ¬ì¡°

### 10.1 Backend íŒŒì¼ êµ¬ì¡°

```
backend/
â”œâ”€â”€ api/                         # Vercel Serverless Functions
â”‚   â”œâ”€â”€ health.ts                # GET /api/health
â”‚   â”œâ”€â”€ ping.ts                  # GET /api/ping
â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â””â”€â”€ logout.ts            # POST /api/auth/logout
â”‚   â”œâ”€â”€ profile/
â”‚   â”‚   â””â”€â”€ index.ts             # GET, PUT /api/profile
â”‚   â”œâ”€â”€ devices/
â”‚   â”‚   â”œâ”€â”€ index.ts             # GET, POST /api/devices
â”‚   â”‚   â”œâ”€â”€ [id].ts              # PUT, DELETE /api/devices/:id (Phase 2)
â”‚   â”‚   â””â”€â”€ [id]/
â”‚   â”‚       â””â”€â”€ transfer.ts      # POST /api/devices/:id/transfer (Phase 2)
â”‚   â”œâ”€â”€ sessions/
â”‚   â”‚   â”œâ”€â”€ index.ts             # GET /api/sessions
â”‚   â”‚   â”œâ”€â”€ upload.ts            # POST /api/sessions/upload
â”‚   â”‚   â”œâ”€â”€ [id].ts              # DELETE /api/sessions/:id (Phase 2)
â”‚   â”‚   â””â”€â”€ export.ts            # GET /api/sessions/export (Phase 2)
â”‚   â”œâ”€â”€ stats/
â”‚   â”‚   â”œâ”€â”€ daily.ts             # GET /api/stats/daily
â”‚   â”‚   â””â”€â”€ range.ts             # GET /api/stats/range
â”‚   â”œâ”€â”€ goals/
â”‚   â”‚   â”œâ”€â”€ index.ts             # GET, POST /api/goals (Phase 2)
â”‚   â”‚   â””â”€â”€ [id].ts              # PUT, DELETE /api/goals/:id (Phase 2)
â”‚   â”œâ”€â”€ notifications/
â”‚   â”‚   â””â”€â”€ index.ts             # GET, PUT /api/notifications (Phase 2)
â”‚   â”œâ”€â”€ skin-profile/
â”‚   â”‚   â””â”€â”€ index.ts             # GET, PUT /api/skin-profile (Phase 2)
â”‚   â”œâ”€â”€ consent/
â”‚   â”‚   â””â”€â”€ index.ts             # GET, POST /api/consent
â”‚   â”œâ”€â”€ announcements/
â”‚   â”‚   â””â”€â”€ index.ts             # GET /api/announcements (Phase 2)
â”‚   â””â”€â”€ admin/                   # Phase 2
â”‚       â”œâ”€â”€ users/
â”‚       â”‚   â”œâ”€â”€ index.ts         # GET /api/admin/users
â”‚       â”‚   â””â”€â”€ [id].ts          # GET, PUT /api/admin/users/:id
â”‚       â”œâ”€â”€ devices/
â”‚       â”‚   â””â”€â”€ index.ts         # GET /api/admin/devices
â”‚       â”œâ”€â”€ stats.ts             # GET /api/admin/stats
â”‚       â”œâ”€â”€ logs.ts              # GET /api/admin/logs
â”‚       â””â”€â”€ announcements/
â”‚           â”œâ”€â”€ index.ts         # POST /api/admin/announcements
â”‚           â””â”€â”€ [id].ts          # PUT, DELETE /api/admin/announcements/:id
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ supabase.ts              # Supabase í´ë¼ì´ì–¸íŠ¸ (admin + user)
â”‚   â”œâ”€â”€ redis.ts                 # Upstash Redis í´ë¼ì´ì–¸íŠ¸
â”‚   â”œâ”€â”€ auth.ts                  # JWT ê²€ì¦ ë¯¸ë“¤ì›¨ì–´
â”‚   â””â”€â”€ validate.ts              # Zod ìŠ¤í‚¤ë§ˆ + ê²€ì¦ í—¬í¼
â”œâ”€â”€ public/
â”‚   â””â”€â”€ index.html               # Vercel ë¹Œë“œìš© ë”ë¯¸
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â””â”€â”€ vercel.json
```

### 10.2 Frontend íŒŒì¼ êµ¬ì¡°

```
frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ layout.tsx              # ë£¨íŠ¸ ë ˆì´ì•„ì›ƒ
â”‚   â”‚   â”œâ”€â”€ page.tsx                # Landing
â”‚   â”‚   â”œâ”€â”€ globals.css             # Tailwind + ë‹¤í¬ëª¨ë“œ
â”‚   â”‚   â”œâ”€â”€ login/page.tsx
â”‚   â”‚   â”œâ”€â”€ signup/page.tsx
â”‚   â”‚   â”œâ”€â”€ reset-password/page.tsx
â”‚   â”‚   â”œâ”€â”€ dashboard/page.tsx
â”‚   â”‚   â”œâ”€â”€ devices/
â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx
â”‚   â”‚   â”‚   â””â”€â”€ [id]/page.tsx
â”‚   â”‚   â”œâ”€â”€ stats/page.tsx
â”‚   â”‚   â”œâ”€â”€ profile/page.tsx        # Phase 1 ì¶”ê°€
â”‚   â”‚   â”œâ”€â”€ settings/page.tsx       # Phase 1 ì¶”ê°€
â”‚   â”‚   â””â”€â”€ admin/                  # Phase 2
â”‚   â”‚       â”œâ”€â”€ page.tsx            # ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ
â”‚   â”‚       â”œâ”€â”€ users/
â”‚   â”‚       â”‚   â”œâ”€â”€ page.tsx
â”‚   â”‚       â”‚   â””â”€â”€ [id]/page.tsx
â”‚   â”‚       â”œâ”€â”€ devices/page.tsx
â”‚   â”‚       â”œâ”€â”€ announcements/page.tsx
â”‚   â”‚       â””â”€â”€ logs/page.tsx
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ Navbar.tsx
â”‚   â”‚   â”œâ”€â”€ ThemeToggle.tsx
â”‚   â”‚   â”œâ”€â”€ DeviceCard.tsx
â”‚   â”‚   â”œâ”€â”€ StatCard.tsx
â”‚   â”‚   â”œâ”€â”€ SessionTable.tsx
â”‚   â”‚   â””â”€â”€ charts/
â”‚   â”‚       â”œâ”€â”€ WeeklyChart.tsx
â”‚   â”‚       â”œâ”€â”€ ShotTypePie.tsx
â”‚   â”‚       â””â”€â”€ TrendLine.tsx
â”‚   â””â”€â”€ lib/
â”‚       â”œâ”€â”€ supabase/
â”‚       â”‚   â”œâ”€â”€ client.ts
â”‚       â”‚   â””â”€â”€ middleware.ts
â”‚       â”œâ”€â”€ api.ts
â”‚       â””â”€â”€ utils.ts
â”œâ”€â”€ middleware.ts
â”œâ”€â”€ tailwind.config.ts
â”œâ”€â”€ next.config.js
â”œâ”€â”€ package.json
â””â”€â”€ vercel.json
```

---

## 11. ì‹¤ì‹œê°„ ë°ì´í„° ì•„í‚¤í…ì²˜

### 11.1 ì‹¤ì‹œê°„ ë°ì´í„° í”Œë¡œìš° (ë””ë°”ì´ìŠ¤ ì‚¬ìš© ì¤‘)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    BLE     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   REST/WS   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Device   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ Mobile   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ Backend  â”‚
â”‚ (ESP32)  â”‚  Notify    â”‚ App      â”‚  Upload     â”‚ API      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                                      â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                        â”‚              â”‚              â”‚
                  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
                  â”‚ DB       â”‚  â”‚ Redis    â”‚  â”‚ WebSocketâ”‚
                  â”‚ (Write)  â”‚  â”‚ (PubSub) â”‚  â”‚ (Push)   â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                              â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                              â”‚ Web        â”‚ â† ì‹¤ì‹œê°„ ëŒ€ì‹œë³´ë“œ
                              â”‚ Dashboard  â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**í”Œë¡œìš° ìƒì„¸:**

1. **ë””ë°”ì´ìŠ¤ â†’ ì•± (BLE)**: ì„¸ì…˜ ì‹œì‘/ì¢…ë£Œ, ë°°í„°ë¦¬ ìƒ˜í”Œ (1ë¶„ ê°„ê²©), ëª¨ë“œ/ë ˆë²¨ ë³€ê²½
2. **ì•± â†’ ì„œë²„ (REST)**: ì„¸ì…˜ ì™„ë£Œ ì‹œ ë°°ì¹˜ ì—…ë¡œë“œ, ì‹¤ì‹œê°„ ìƒíƒœ ì—…ë°ì´íŠ¸ (ì„ íƒ)
3. **ì„œë²„ â†’ ì›¹ (WebSocket/SSE)**: Redis PubSubìœ¼ë¡œ ì‹¤ì‹œê°„ ëŒ€ì‹œë³´ë“œ ì—…ë°ì´íŠ¸ (Phase 2)

### 11.2 1,000+ ë””ë°”ì´ìŠ¤ ë™ì‹œ ê´€ë¦¬

**MVP (Vercel)**: ë™ê¸° REST APIë§Œ. ì‹¤ì‹œê°„ ëŒ€ì‹œë³´ë“œ ì—†ìŒ.

**AWS Phase 2**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ì‹¤ì‹œê°„ ë””ë°”ì´ìŠ¤ ê´€ë¦¬                     â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  REST   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚ 1000+     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ API Service  â”‚               â”‚
â”‚  â”‚ Mobile    â”‚         â”‚ (ECS x3~10)  â”‚               â”‚
â”‚  â”‚ Apps      â”‚         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚                        â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚                    â”‚          â”‚          â”‚             â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â” â”Œâ”€â”€â”€â–¼â”€â”€â”€â” â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚              â”‚ RDS     â”‚ â”‚ Redis â”‚ â”‚ SQS      â”‚      â”‚
â”‚              â”‚ Aurora  â”‚ â”‚ Cache â”‚ â”‚ Queue    â”‚      â”‚
â”‚              â”‚         â”‚ â”‚       â”‚ â”‚          â”‚      â”‚
â”‚              â”‚ Write:  â”‚ â”‚ Read  â”‚ â”‚ ë¹„ë™ê¸°   â”‚      â”‚
â”‚              â”‚ Primary â”‚ â”‚ Cache â”‚ â”‚ ì²˜ë¦¬     â”‚      â”‚
â”‚              â”‚ Read:   â”‚ â”‚ + Pub â”‚ â”‚          â”‚      â”‚
â”‚              â”‚ Replica â”‚ â”‚ Sub   â”‚ â”‚          â”‚      â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                        â”‚
â”‚  ì²˜ë¦¬ëŸ‰ ëª©í‘œ:                                           â”‚
â”‚  - ë™ì‹œ í™œì„± ë””ë°”ì´ìŠ¤: 1,000+                          â”‚
â”‚  - ì´ˆë‹¹ ì„¸ì…˜ ì—…ë¡œë“œ: 100+                              â”‚
â”‚  - ì´ˆë‹¹ API ìš”ì²­: 500+                                â”‚
â”‚  - í‰ê·  ì‘ë‹µ ì‹œê°„: < 100ms                             â”‚
â”‚                                                        â”‚
â”‚  ìŠ¤ì¼€ì¼ë§ ì „ëµ:                                         â”‚
â”‚  - ECS Auto Scaling: CPU 70% ê¸°ì¤€                     â”‚
â”‚  - RDS Read Replica: ì½ê¸° ë¶€í•˜ ë¶„ì‚°                    â”‚
â”‚  - Redis: í†µê³„ ìºì‹œ (TTL 5ë¶„), ë””ë°”ì´ìŠ¤ ìƒíƒœ ìºì‹œ      â”‚
â”‚  - SQS: í†µê³„ ì¬ê³„ì‚°, OTA ìƒíƒœ ì¶”ì  ë¹„ë™ê¸° ì²˜ë¦¬         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 11.3 OTA íŒì›¨ì–´ ê´€ë¦¬ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   OTA íŒì›¨ì–´ ê´€ë¦¬ ì‹œìŠ¤í…œ                     â”‚
â”‚                                                            â”‚
â”‚  ê´€ë¦¬ì:                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   Upload    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   Store           â”‚
â”‚  â”‚ Admin    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ API      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”Œâ”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Console  â”‚             â”‚ Service  â”‚           â”‚  S3  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜           â”‚ OTA  â”‚â”‚
â”‚                                â”‚                  â”‚ Bins â”‚â”‚
â”‚                           â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”           â””â”€â”€â”€â”¬â”€â”€â”˜â”‚
â”‚                           â”‚ DB       â”‚               â”‚    â”‚
â”‚                           â”‚ firmware â”‚               â”‚    â”‚
â”‚                           â”‚ _versionsâ”‚               â”‚    â”‚
â”‚                           â”‚ _rolloutsâ”‚               â”‚    â”‚
â”‚                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚    â”‚
â”‚                                                      â”‚    â”‚
â”‚  ë””ë°”ì´ìŠ¤ ì—…ë°ì´íŠ¸:                                     â”‚    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   Check    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   Download   â”‚    â”‚
â”‚  â”‚ Mobile   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ API      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”‚ App      â”‚            â”‚ Service  â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚       â”‚ BLE OTA                                          â”‚
â”‚       â–¼                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                             â”‚
â”‚  â”‚ Device   â”‚  â† OTA via BLE (ê¸°ì¡´ FW OTA ì¸í”„ë¼ í™œìš©)    â”‚
â”‚  â”‚ (ESP32)  â”‚                                             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                             â”‚
â”‚                                                            â”‚
â”‚  OTA í”Œë¡œìš°:                                                â”‚
â”‚  1. ê´€ë¦¬ì: ìƒˆ íŒì›¨ì–´ ë°”ì´ë„ˆë¦¬ ì—…ë¡œë“œ â†’ S3 ì €ì¥            â”‚
â”‚  2. ê´€ë¦¬ì: ë¡¤ì•„ì›ƒ ì„¤ì • (ëŒ€ìƒ ë””ë°”ì´ìŠ¤ %, ë‹¨ê³„ë³„ ë°°í¬)     â”‚
â”‚  3. ì•±: ì„œë²„ì— ë””ë°”ì´ìŠ¤ íŒì›¨ì–´ ë²„ì „ ì²´í¬ ìš”ì²­              â”‚
â”‚  4. ì„œë²„: ì—…ë°ì´íŠ¸ ê°€ëŠ¥ ì‹œ ë‹¤ìš´ë¡œë“œ URL ì œê³µ               â”‚
â”‚  5. ì•±: ë°”ì´ë„ˆë¦¬ ë‹¤ìš´ë¡œë“œ â†’ BLE OTAë¡œ ë””ë°”ì´ìŠ¤ ì—…ë°ì´íŠ¸    â”‚
â”‚  6. ì•±: ì—…ë°ì´íŠ¸ ê²°ê³¼ (ì„±ê³µ/ì‹¤íŒ¨) ì„œë²„ì— ë³´ê³               â”‚
â”‚  7. ì„œë²„: firmware_update_history ê¸°ë¡                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì¶”ê°€ DB í…Œì´ë¸” (Phase 2):**

#### firmware_rollouts
| ì»¬ëŸ¼ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| id | UUID | PK |
| firmware_version_id | UUID | FKâ†’firmware_versions |
| target_percentage | INTEGER | ë°°í¬ ëŒ€ìƒ ë¹„ìœ¨ (1~100%) |
| status | TEXT | draft/active/paused/completed |
| created_by | UUID | FKâ†’profiles (admin) |
| created_at | TIMESTAMPTZ | ìƒì„± ì‹œì  |

---

## 12. AI ê°œì¸í™” ì•„í‚¤í…ì²˜ (Phase 3 - ìµœì¢… ëª©í‘œ)

### 12.1 ë¹„ì „

> **ì‚¬ìš©ìì˜ ì‚¬ìš© ì´ë ¥ + í”¼ë¶€ ìƒíƒœ ë°ì´í„° â†’ AI ëª¨ë¸ ë¶„ì„ â†’ ìµœì ì˜ í”¼ë¶€ ê´€ë¦¬ ì†”ë£¨ì…˜ ì¶”ì²œ**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 AI ê°œì¸í™” ì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜                         â”‚
â”‚                                                                 â”‚
â”‚  ë°ì´í„° ìˆ˜ì§‘ (í˜„ì¬):                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚  â”‚ ì‚¬ìš© ì´ë ¥ â”‚  â”‚ í”¼ë¶€     â”‚  â”‚ ë””ë°”ì´ìŠ¤ â”‚                     â”‚
â”‚  â”‚          â”‚  â”‚ í”„ë¡œí•„   â”‚  â”‚ ë°ì´í„°   â”‚                     â”‚
â”‚  â”‚ sessions â”‚  â”‚ skin_    â”‚  â”‚ devices  â”‚                     â”‚
â”‚  â”‚ stats    â”‚  â”‚ profiles â”‚  â”‚ firmware â”‚                     â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚       â”‚              â”‚              â”‚                           â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                      â”‚                                          â”‚
â”‚                      â–¼                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                  ë°ì´í„° íŒŒì´í”„ë¼ì¸ (Phase 3)                â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚  â”‚
â”‚  â”‚  â”‚ ETL      â”‚  â”‚ Feature  â”‚  â”‚ Model    â”‚               â”‚  â”‚
â”‚  â”‚  â”‚ Pipeline â”‚â”€â–ºâ”‚ Store    â”‚â”€â–ºâ”‚ Training â”‚               â”‚  â”‚
â”‚  â”‚  â”‚ (Lambda) â”‚  â”‚ (S3/RDS) â”‚  â”‚ (Sage-   â”‚               â”‚  â”‚
â”‚  â”‚  â”‚          â”‚  â”‚          â”‚  â”‚  Maker)  â”‚               â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜               â”‚  â”‚
â”‚  â”‚                                    â”‚                      â”‚  â”‚
â”‚  â”‚                              â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”              â”‚  â”‚
â”‚  â”‚                              â”‚ Model      â”‚              â”‚  â”‚
â”‚  â”‚                              â”‚ Endpoint   â”‚              â”‚  â”‚
â”‚  â”‚                              â”‚ (Sage-     â”‚              â”‚  â”‚
â”‚  â”‚                              â”‚  Maker)    â”‚              â”‚  â”‚
â”‚  â”‚                              â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                       â”‚                        â”‚
â”‚                                       â–¼                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚               ì¶”ì²œ ì„œë¹„ìŠ¤ (Recommendation Service)         â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  ì…ë ¥:                                                    â”‚  â”‚
â”‚  â”‚  - ì‚¬ìš©ì ì‚¬ìš© íŒ¨í„´ (ìµœê·¼ 30ì¼ ì„¸ì…˜ ë°ì´í„°)                 â”‚  â”‚
â”‚  â”‚  - í”¼ë¶€ í”„ë¡œí•„ (íƒ€ì…, ê³ ë¯¼, ë‚˜ì´ëŒ€)                         â”‚  â”‚
â”‚  â”‚  - ë””ë°”ì´ìŠ¤ ì‚¬ìš© ë¹ˆë„ ë° ì„ í˜¸ ëª¨ë“œ                          â”‚  â”‚
â”‚  â”‚  - ê³„ì ˆ/ë‚ ì”¨ ë°ì´í„° (ì™¸ë¶€ API)                              â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  ì¶œë ¥ (recommendations í…Œì´ë¸”):                            â”‚  â”‚
â”‚  â”‚  - ì¶”ì²œ ëª¨ë“œ/ë ˆë²¨ ì¡°í•©                                     â”‚  â”‚
â”‚  â”‚  - ì¶”ì²œ ì‚¬ìš© ì‹œê°„ ë° ë¹ˆë„                                   â”‚  â”‚
â”‚  â”‚  - ë§ì¶¤í˜• í”¼ë¶€ ê´€ë¦¬ ê°€ì´ë“œ                                  â”‚  â”‚
â”‚  â”‚  - ëª¨ë“œ ì „í™˜ ìˆœì„œ ì¶”ì²œ (ì˜ˆ: Glow L2 10ë¶„ â†’ Firm L1 5ë¶„)    â”‚  â”‚
â”‚  â”‚  - ì‚¬ìš©ì êµ°ì§‘ ê¸°ë°˜ ì¶”ì²œ (ìœ ì‚¬ ì‚¬ìš©ì íŒ¨í„´)                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â”‚  UI í‘œì‹œ:                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚  â”‚ ëª¨ë°”ì¼   â”‚  â”‚ ì›¹       â”‚                                    â”‚
â”‚  â”‚ ì•±       â”‚  â”‚ ëŒ€ì‹œë³´ë“œ â”‚                                    â”‚
â”‚  â”‚          â”‚  â”‚          â”‚                                    â”‚
â”‚  â”‚ "ì˜¤ëŠ˜ì˜  â”‚  â”‚ "í”¼ë¶€    â”‚                                    â”‚
â”‚  â”‚  ì¶”ì²œ"   â”‚  â”‚  ë¶„ì„    â”‚                                    â”‚
â”‚  â”‚ ì¹´ë“œ     â”‚  â”‚  ë¦¬í¬íŠ¸" â”‚                                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 12.2 AI íŒŒì´í”„ë¼ì¸ ìƒì„¸

| ë‹¨ê³„ | ê¸°ìˆ  | ì„¤ëª… |
|------|------|------|
| ë°ì´í„° ìˆ˜ì§‘ | RDS â†’ S3 | ì¼ì¼ ë°°ì¹˜ë¡œ ìµëª…í™”ëœ ì‚¬ìš© ë°ì´í„° S3 ì¶”ì¶œ |
| í”¼ì²˜ ì—”ì§€ë‹ˆì–´ë§ | Lambda/Glue | ì‚¬ìš© ë¹ˆë„, ì„ í˜¸ ëª¨ë“œ, ì‹œê°„ëŒ€ íŒ¨í„´, í”¼ë¶€ íƒ€ì…ë³„ ê·¸ë£¹í•‘ |
| ëª¨ë¸ í•™ìŠµ | SageMaker | í˜‘ì—… í•„í„°ë§ + ì½˜í…ì¸  ê¸°ë°˜ í•˜ì´ë¸Œë¦¬ë“œ ì¶”ì²œ |
| ëª¨ë¸ ì„œë¹™ | SageMaker Endpoint | ì‹¤ì‹œê°„ ì¶”ì²œ API (< 100ms ì‘ë‹µ) |
| ì¶”ì²œ ì €ì¥ | RDS recommendations | ì¼ 1íšŒ ë°°ì¹˜ ì¶”ì²œ ìƒì„± + ì‹¤ì‹œê°„ ì¶”ì²œ ìºì‹œ |

### 12.3 ê°œì¸í™” ë°ì´í„° ëª¨ë¸

#### recommendations (Phase 3)
| ì»¬ëŸ¼ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| id | UUID | PK |
| user_id | UUID | FKâ†’profiles |
| type | TEXT | daily_routine/mode_suggestion/usage_tip |
| title | TEXT | ì¶”ì²œ ì œëª© |
| description | TEXT | ì¶”ì²œ ì„¤ëª… |
| metadata | JSONB | ì¶”ì²œ ìƒì„¸ (ëª¨ë“œ, ë ˆë²¨, ì‹œê°„ ë“±) |
| confidence | FLOAT | ì¶”ì²œ ì‹ ë¢°ë„ (0.0~1.0) |
| is_read | BOOLEAN | ì‚¬ìš©ì í™•ì¸ ì—¬ë¶€ |
| feedback | TEXT | ì‚¬ìš©ì í”¼ë“œë°± (helpful/not_helpful) |
| expires_at | TIMESTAMPTZ | ì¶”ì²œ ë§Œë£Œ ì‹œì  |
| created_at | TIMESTAMPTZ | ìƒì„± ì‹œì  |

### 12.4 Phase 3ê¹Œì§€ì˜ ë°ì´í„° ì¶•ì  ì „ëµ

Phase 1~2ì—ì„œ AI í•™ìŠµì— í•„ìš”í•œ ë°ì´í„°ë¥¼ **ë¯¸ë¦¬ ìˆ˜ì§‘**:

| ë°ì´í„° | ìˆ˜ì§‘ ì‹œì  | AI í™œìš© |
|--------|---------|---------|
| ì„¸ì…˜ ì´ë ¥ (ëª¨ë“œ/ë ˆë²¨/ì‹œê°„) | Phase 1 | ì‚¬ìš© íŒ¨í„´ ë¶„ì„, ì„ í˜¸ë„ í•™ìŠµ |
| í”¼ë¶€ í”„ë¡œí•„ | Phase 2 | í”¼ë¶€ íƒ€ì…ë³„ ì¶”ì²œ ëª¨ë¸ |
| ì‚¬ìš© ëª©í‘œ + ë‹¬ì„±ë¥  | Phase 2 | ë™ê¸°ë¶€ì—¬ íŒ¨í„´ í•™ìŠµ |
| ì„¸ì…˜ ì™„ë£Œìœ¨/ì¤‘ë‹¨ ì‚¬ìœ  | Phase 1 | ì´íƒˆ ì˜ˆì¸¡, ì‚¬ìš©ì„± ê°œì„  |
| ë°°í„°ë¦¬ ì†Œëª¨ íŒ¨í„´ | Phase 1 | ë””ë°”ì´ìŠ¤ ìƒíƒœ ì˜ˆì¸¡ |
| ê²½ê³  ë°œìƒ ë¹ˆë„ | Phase 1 | ë””ë°”ì´ìŠ¤ ì´ìƒ ê°ì§€ |

---

## 13. ì›¹ ëŒ€ì‹œë³´ë“œ â€” ì „ë¬¸ ë¶„ì„ ê¸°ëŠ¥

### 13.1 ì‚¬ìš©ì ì›¹ (ëª¨ë°”ì¼ë³´ë‹¤ ìƒì„¸)

ëª¨ë°”ì¼ ì•±ì€ **ê°„í¸í•œ ì¼ìƒ ì‚¬ìš©**, ì›¹ì€ **ì‹¬ì¸µ ë¶„ì„ ë° ì „ë¬¸ ë°ì´í„°**ë¥¼ ì œê³µ.

| ê¸°ëŠ¥ | ëª¨ë°”ì¼ ì•± | ì›¹ ëŒ€ì‹œë³´ë“œ |
|------|---------|-----------|
| ì˜¤ëŠ˜ ì‚¬ìš© ìš”ì•½ | O (ê°„ë‹¨ ì¹´ë“œ) | O (ìƒì„¸ ìˆ˜ì¹˜) |
| ì£¼ê°„/ì›”ê°„ í†µê³„ | O (ì°¨íŠ¸ 1~2ê°œ) | O (ë‹¤ì¤‘ ì°¨íŠ¸, ë¹„êµ ë¶„ì„) |
| ì„¸ì…˜ ëª©ë¡ | O (ìµœê·¼ 10ê°œ) | O (ì „ì²´ ëª©ë¡, í•„í„°, í˜ì´ì§•) |
| ì„¸ì…˜ ìƒì„¸ | O (ê¸°ë³¸ ì •ë³´) | O (ë°°í„°ë¦¬ ê·¸ë˜í”„, íƒ€ì„ë¼ì¸) |
| ì‚¬ìš© íŒ¨í„´ ë¶„ì„ | X | O (ì‹œê°„ëŒ€ë³„ íˆíŠ¸ë§µ, ëª¨ë“œ ì „í™˜ íŒ¨í„´) |
| ê¸°ê°„ ë¹„êµ | X | O (ì§€ë‚œë‹¬ ëŒ€ë¹„, ì§€ë‚œì£¼ ëŒ€ë¹„) |
| ì‚¬ìš© ë¦¬í¬íŠ¸ | X | O (PDF ë‹¤ìš´ë¡œë“œ, ì¸ì‡„) |
| ë°ì´í„° ë‚´ë³´ë‚´ê¸° | X | O (CSV, Excel) |
| ë””ë°”ì´ìŠ¤ ìƒì„¸ | O (ê¸°ë³¸) | O (ì „ì²´ ì„¸ì…˜ ì´ë ¥, ë°°í„°ë¦¬ íŠ¸ë Œë“œ) |
| í”¼ë¶€ ê´€ë¦¬ ì¶”ì²œ | O (ì¹´ë“œ) | O (ìƒì„¸ ë¶„ì„ ë¦¬í¬íŠ¸) |
| ê´€ë¦¬ì ì½˜ì†” | X | O (ì „ì²´ ê´€ë¦¬ ê¸°ëŠ¥) |

### 13.2 ì›¹ ëŒ€ì‹œë³´ë“œ ì „ë¬¸ ë¶„ì„ í™”ë©´

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DualTetraX Dashboard                      [Dark Mode] [ğŸ‘¤] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      â”‚                                                       â”‚
â”‚ Nav  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚      â”‚  â”‚ ì´ ì„¸ì…˜  â”‚  â”‚ ì´ ì‹œê°„  â”‚  â”‚ í‰ê· /ì¼  â”‚  â”‚ ì™„ë£Œìœ¨ â”‚ â”‚
â”‚ ëŒ€ì‹œ â”‚  â”‚   128   â”‚  â”‚  18.5h  â”‚  â”‚  2.6h   â”‚  â”‚  87%  â”‚ â”‚
â”‚ ë³´ë“œ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚      â”‚                                                       â”‚
â”‚ í†µê³„ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚      â”‚  â”‚  ì›”ê°„ ì‚¬ìš© íŠ¸ë Œë“œ (Line Chart)                  â”‚  â”‚
â”‚ ë””ë°” â”‚  â”‚  â”€â”€â”€â”€â”€ U-Shot  â”€ â”€ â”€ E-Shot  ..... LED         â”‚  â”‚
â”‚ ì´ìŠ¤ â”‚  â”‚  + ì§€ë‚œë‹¬ ëŒ€ë¹„ ë¹„êµ (ì ì„  ì˜¤ë²„ë ˆì´)              â”‚  â”‚
â”‚      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚ ë¶„ì„ â”‚                                                       â”‚
â”‚      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ ë¦¬í¬ â”‚  â”‚ ì‚¬ìš© ì‹œê°„ëŒ€ íˆíŠ¸ë§µâ”‚  â”‚ ëª¨ë“œë³„ ì‚¬ìš© ë¹„ìœ¨ (Pie)   â”‚  â”‚
â”‚ íŠ¸   â”‚  â”‚ (ì‹œê°„ x ìš”ì¼)    â”‚  â”‚ + ì§€ë‚œë‹¬ ëŒ€ë¹„ ë³€í™”        â”‚  â”‚
â”‚      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚ ì„¤ì • â”‚                                                       â”‚
â”‚      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚      â”‚  â”‚  ìµœê·¼ ì„¸ì…˜ ëª©ë¡ (ìƒì„¸ í…Œì´ë¸”)                    â”‚  â”‚
â”‚      â”‚  â”‚  ë‚ ì§œ | ëª¨ë“œ | ë ˆë²¨ | ì‹œê°„ | ì™„ë£Œ | ê²½ê³  | ë°°í„°ë¦¬â”‚  â”‚
â”‚      â”‚  â”‚  [í•„í„°] [ì •ë ¬] [ë‚´ë³´ë‚´ê¸°]                        â”‚  â”‚
â”‚      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 13.3 ë””ë°”ì´ìŠ¤ ë¶„ì„ ëŒ€ì‹œë³´ë“œ (ê´€ë¦¬ì â€” ë§ˆì¼€íŒ…/ì œí’ˆê°œë°œìš©)

ë””ë°”ì´ìŠ¤ ê´€ë¦¬ í™”ë©´ì—ì„œ ë§ˆì¼€íŒ… ë° ì°¨ì„¸ëŒ€ ì œí’ˆ ê°œë°œì— í™œìš©í•  ìˆ˜ ìˆëŠ” **ì¢…í•© ë¶„ì„ ê·¸ë˜í”„**ë¥¼ ì œê³µí•œë‹¤.

#### 13.3.1 í•µì‹¬ ë¶„ì„ ì§€í‘œ

| ì§€í‘œ ì¹´í…Œê³ ë¦¬ | ê·¸ë˜í”„ ìœ í˜• | ë°ì´í„° ì†ŒìŠ¤ | í™œìš© ëª©ì  |
|-------------|-----------|-----------|---------|
| **í‰ê·  ì‚¬ìš© ì‹œê°„** | Line Chart (ì¼/ì£¼/ì›” ì¶”ì´) | usage_sessions.working_duration | ì‚¬ìš©ì engagement íŒŒì•… |
| **ìì£¼ ì‚¬ìš©í•˜ëŠ” ê¸°ëŠ¥** | Bar/Pie Chart (ëª¨ë“œë³„ ì‚¬ìš© ë¹ˆë„) | usage_sessions.device_mode, shot_type | ì¸ê¸° ê¸°ëŠ¥ â†’ ë§ˆì¼€íŒ… ê°•ì¡° í¬ì¸íŠ¸ |
| **ë°°í„°ë¦¬ ì •ë³´** | Area Chart (í‰ê·  ì†Œëª¨ëŸ‰ ì¶”ì´) | battery_samples, usage_sessions.battery_start/end | ë°°í„°ë¦¬ ìˆ˜ëª… ë¶„ì„ â†’ í•˜ë“œì›¨ì–´ ê°œì„  |
| **ì‚¬ìš©ì ì—°ë ¹ ë¶„í¬** | Donut Chart / Histogram | profiles.date_of_birth | íƒ€ê²Ÿ ë§ˆì¼€íŒ…, UX ìµœì í™” |
| **ì‚¬ìš© ì‹œê°„ëŒ€** | Heatmap (ì‹œê°„ x ìš”ì¼) | usage_sessions.start_time | ë§ˆì¼€íŒ… ì‹œì  ìµœì í™” |
| **ì„¸ì…˜ ì™„ë£Œìœ¨** | Gauge + Trend Line | usage_sessions.completion_percent | ì œí’ˆ ì‚¬ìš©ì„± í‰ê°€ |
| **ê²½ê³ /ì´ìƒ ë°œìƒ** | Bar Chart (ìœ í˜•ë³„) | usage_sessions.had_temperature_warning, termination_reason | í’ˆì§ˆ ê´€ë¦¬, í•˜ë“œì›¨ì–´ ê°œì„  |
| **ë””ë°”ì´ìŠ¤ ë“±ë¡ ì¶”ì´** | Area Chart (ì›”ë³„ ëˆ„ì ) | devices.registered_at | ì‹œì¥ ì„±ì¥ë¥  |
| **íŒì›¨ì–´ ë²„ì „ ë¶„í¬** | Stacked Bar Chart | devices.firmware_version | OTA ë°°í¬ í˜„í™© |
| **ì§€ì—­ë³„ ì‚¬ìš©ì ë¶„í¬** | Map / Bar Chart | profiles.timezone | ê¸€ë¡œë²Œ ì§„ì¶œ ì „ëµ |

#### 13.3.2 ëŒ€ì‹œë³´ë“œ ë ˆì´ì•„ì›ƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ë””ë°”ì´ìŠ¤ ë¶„ì„ ëŒ€ì‹œë³´ë“œ          ê¸°ê°„: [30ì¼â–¼]  [CSV ë‹¤ìš´ë¡œë“œ]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ì´ ë””ë°”ì´ìŠ¤â”‚  â”‚ í™œì„±ë¥     â”‚  â”‚ í‰ê·  ì‚¬ìš©â”‚  â”‚ í‰ê·  ì™„ë£Œìœ¨      â”‚ â”‚
â”‚  â”‚  1,234   â”‚  â”‚   87%    â”‚  â”‚  23ë¶„/ì¼ â”‚  â”‚   91%           â”‚ â”‚
â”‚  â”‚ (+15% â†‘) â”‚  â”‚ (+3% â†‘)  â”‚  â”‚ (+2ë¶„ â†‘) â”‚  â”‚ (+5% â†‘)        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  ê¸°ëŠ¥ë³„ ì‚¬ìš© ë¹ˆë„ (Bar Chart)    â”‚  â”‚  ì‚¬ìš©ì ì—°ë ¹ ë¶„í¬ (Donut)  â”‚â”‚
â”‚  â”‚                                â”‚  â”‚                          â”‚â”‚
â”‚  â”‚  â–Šâ–Šâ–Šâ–Šâ–Šâ–Šâ–Šâ–Š Glow     25%       â”‚  â”‚     â”Œâ”€â”€â”€â”€â”              â”‚â”‚
â”‚  â”‚  â–Šâ–Šâ–Šâ–Šâ–Šâ–Šâ–Š  Toneup   20%       â”‚  â”‚   â•± 20ëŒ€ â•² 15%         â”‚â”‚
â”‚  â”‚  â–Šâ–Šâ–Šâ–Šâ–Š    Renew    15%       â”‚  â”‚  â”‚ 30ëŒ€   â”‚ 25%         â”‚â”‚
â”‚  â”‚  â–Šâ–Šâ–Šâ–Š     Volume   12%       â”‚  â”‚  â”‚ 40ëŒ€   â”‚ 35%         â”‚â”‚
â”‚  â”‚  â–Šâ–Šâ–Šâ–Šâ–Šâ–Š   Clean    18%       â”‚  â”‚   â•² 50ëŒ€ â•± 20%         â”‚â”‚
â”‚  â”‚  â–Šâ–Šâ–Š       Firm     8%        â”‚  â”‚     â””â”€â”€â”€â”€â”˜ ê¸°íƒ€ 5%      â”‚â”‚
â”‚  â”‚  â–Šâ–Š        Line     5%        â”‚  â”‚                          â”‚â”‚
â”‚  â”‚  â–Šâ–Šâ–Šâ–Š     Lift     12%       â”‚  â”‚                          â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  í‰ê·  ì‚¬ìš© ì‹œê°„ ì¶”ì´ (Line)     â”‚  â”‚  ë°°í„°ë¦¬ ì†Œëª¨ ë¶„ì„ (Area)   â”‚â”‚
â”‚  â”‚                                â”‚  â”‚                          â”‚â”‚
â”‚  â”‚  30 â”€                          â”‚  â”‚  200mV â”€                 â”‚â”‚
â”‚  â”‚  25 â”€    â•±â”€â”€â•²    â•±â”€â”€          â”‚  â”‚  150mV â”€  â”€â”€â•²            â”‚â”‚
â”‚  â”‚  20 â”€ â”€â”€â•±    â•²â”€â”€â•±             â”‚  â”‚  100mV â”€     â•²â”€â”€  â”€â”€    â”‚â”‚
â”‚  â”‚  15 â”€                          â”‚  â”‚   50mV â”€       â•²â”€â”€â•±     â”‚â”‚
â”‚  â”‚      ì›”  í™”  ìˆ˜  ëª©  ê¸ˆ  í†   ì¼  â”‚  â”‚      1ì£¼  2ì£¼  3ì£¼  4ì£¼  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  ì‚¬ìš© ì‹œê°„ëŒ€ íˆíŠ¸ë§µ (Heatmap: ì‹œê°„ x ìš”ì¼)                     â”‚â”‚
â”‚  â”‚                                                              â”‚â”‚
â”‚  â”‚       06  07  08  09  10  11  ...  20  21  22  23           â”‚â”‚
â”‚  â”‚  ì›”   â–‘   â–‘   â–“   â–“â–“  â–“   â–‘   ...  â–“â–“  â–“â–“â–“ â–“   â–‘          â”‚â”‚
â”‚  â”‚  í™”   â–‘   â–‘   â–“   â–“â–“  â–“â–“  â–‘   ...  â–“â–“  â–“â–“â–“ â–“â–“  â–‘          â”‚â”‚
â”‚  â”‚  ...                                                        â”‚â”‚
â”‚  â”‚  ì¼   â–‘   â–‘   â–‘   â–“   â–“â–“â–“ â–“â–“  ...  â–“   â–“â–“  â–‘   â–‘          â”‚â”‚
â”‚  â”‚                                                              â”‚â”‚
â”‚  â”‚  â–‘ ë‚®ìŒ  â–“ ë³´í†µ  â–“â–“ ë†’ìŒ  â–“â–“â–“ ë§¤ìš° ë†’ìŒ                      â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  ì¢…ë£Œ ì‚¬ìœ  ë¶„ì„ (Pie)           â”‚  â”‚  FW ë²„ì „ ë¶„í¬ (Stacked)   â”‚â”‚
â”‚  â”‚                                â”‚  â”‚                          â”‚â”‚
â”‚  â”‚  âœ“ ì •ìƒì™„ë£Œ(8ë¶„)      68%      â”‚  â”‚  v1.0.23  â–Šâ–Šâ–Šâ–Šâ–Šâ–Š  60%  â”‚â”‚
â”‚  â”‚  â¸ ìˆ˜ë™ì¢…ë£Œ           15%      â”‚  â”‚  v1.0.22  â–Šâ–Šâ–Š     25%  â”‚â”‚
â”‚  â”‚  ğŸ”‹ ë°°í„°ë¦¬ë¶€ì¡±          8%      â”‚  â”‚  v1.0.21  â–Šâ–Š      10%  â”‚â”‚
â”‚  â”‚  ğŸŒ¡ ê³¼ì—´ì¢…ë£Œ            5%      â”‚  â”‚  ê¸°íƒ€     â–Š        5%  â”‚â”‚
â”‚  â”‚  ê¸°íƒ€                   4%      â”‚  â”‚                          â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 13.3.3 ë¶„ì„ API ì—”ë“œí¬ì¸íŠ¸

| Method | Path | ì„¤ëª… |
|--------|------|------|
| GET | /api/admin/analytics/usage-trends | ì‚¬ìš© ì‹œê°„/ì„¸ì…˜ ìˆ˜ ì¶”ì´ |
| GET | /api/admin/analytics/feature-usage | ê¸°ëŠ¥(ëª¨ë“œ)ë³„ ì‚¬ìš© ë¹ˆë„ |
| GET | /api/admin/analytics/battery | ë°°í„°ë¦¬ ì†Œëª¨ ë¶„ì„ |
| GET | /api/admin/analytics/demographics | ì‚¬ìš©ì ì—°ë ¹/ì§€ì—­ ë¶„í¬ |
| GET | /api/admin/analytics/heatmap | ì‹œê°„ëŒ€ë³„ ì‚¬ìš© íˆíŠ¸ë§µ |
| GET | /api/admin/analytics/termination | ì¢…ë£Œ ì‚¬ìœ  ë¶„ì„ |
| GET | /api/admin/analytics/firmware | FW ë²„ì „ ë¶„í¬ |
| GET | /api/admin/analytics/export | ë¶„ì„ ë°ì´í„° CSV/Excel ë‚´ë³´ë‚´ê¸° |

#### 13.3.4 SQL ì¿¼ë¦¬ ì˜ˆì‹œ â€” í•µì‹¬ ì§€í‘œ

```sql
-- ê¸°ëŠ¥ë³„ ì‚¬ìš© ë¹ˆë„ (ìµœê·¼ 30ì¼)
SELECT device_mode, shot_type,
       COUNT(*) as session_count,
       AVG(working_duration) as avg_duration,
       SUM(working_duration) as total_duration
FROM usage_sessions
WHERE start_time >= now() - INTERVAL '30 days'
GROUP BY device_mode, shot_type
ORDER BY session_count DESC;

-- ì‚¬ìš©ì ì—°ë ¹ ë¶„í¬
SELECT
  CASE
    WHEN age < 20 THEN '10ëŒ€'
    WHEN age < 30 THEN '20ëŒ€'
    WHEN age < 40 THEN '30ëŒ€'
    WHEN age < 50 THEN '40ëŒ€'
    WHEN age < 60 THEN '50ëŒ€'
    ELSE '60ëŒ€ ì´ìƒ'
  END as age_group,
  COUNT(*) as user_count
FROM (
  SELECT EXTRACT(YEAR FROM AGE(now(), date_of_birth)) as age
  FROM profiles
  WHERE date_of_birth IS NOT NULL
) sub
GROUP BY age_group
ORDER BY age_group;

-- ì‹œê°„ëŒ€ë³„ ì‚¬ìš© íˆíŠ¸ë§µ
SELECT
  EXTRACT(DOW FROM start_time) as day_of_week,
  EXTRACT(HOUR FROM start_time) as hour_of_day,
  COUNT(*) as session_count
FROM usage_sessions
WHERE start_time >= now() - INTERVAL '30 days'
GROUP BY day_of_week, hour_of_day
ORDER BY day_of_week, hour_of_day;

-- í‰ê·  ë°°í„°ë¦¬ ì†Œëª¨ (ëª¨ë“œë³„)
SELECT device_mode,
       AVG(battery_start - battery_end) as avg_consumption_mv,
       COUNT(*) as sample_count
FROM usage_sessions
WHERE battery_start IS NOT NULL AND battery_end IS NOT NULL
  AND start_time >= now() - INTERVAL '30 days'
GROUP BY device_mode
ORDER BY avg_consumption_mv DESC;
```

### 13.4 ê´€ë¦¬ì ì½˜ì†” (Phase 1)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DualTetraX Admin Console                  [ì•Œë¦¼ 3] [ê´€ë¦¬ì]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      â”‚                                                       â”‚
â”‚ Nav  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚      â”‚  â”‚ì´ ì‚¬ìš©ì â”‚  â”‚ í™œì„±    â”‚  â”‚ì´ ë””ë°”ì´ìŠ¤â”‚  â”‚ ì¼ì¼   â”‚ â”‚
â”‚ KPI  â”‚  â”‚  2,156  â”‚  â”‚  1,823  â”‚  â”‚  2,450  â”‚  â”‚ ì„¸ì…˜   â”‚ â”‚
â”‚      â”‚  â”‚ (+12%)  â”‚  â”‚ (+8%)   â”‚  â”‚ (+15%)  â”‚  â”‚ 4,200  â”‚ â”‚
â”‚ ì‚¬ìš© â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ ì   â”‚                                                       â”‚
â”‚      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ ë””ë°” â”‚  â”‚  ì‚¬ìš©ì ì¦ê°€ íŠ¸ë Œë“œ / ë””ë°”ì´ìŠ¤ ë“±ë¡ íŠ¸ë Œë“œ       â”‚  â”‚
â”‚ ì´ìŠ¤ â”‚  â”‚  (Area Chart - ìµœê·¼ 12ê°œì›”)                      â”‚  â”‚
â”‚      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚ ê³µì§€ â”‚                                                       â”‚
â”‚      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ OTA  â”‚  â”‚ íŒì›¨ì–´ ë°°í¬ í˜„í™© â”‚  â”‚ ìµœê·¼ ê´€ë¦¬ì í™œë™ ë¡œê·¸      â”‚  â”‚
â”‚      â”‚  â”‚ v1.0.23: 85%   â”‚  â”‚ admin@...: ì‚¬ìš©ì ìˆ˜ì •     â”‚  â”‚
â”‚ ë¡œê·¸ â”‚  â”‚ v1.0.24: 15%   â”‚  â”‚ admin@...: ê³µì§€ì‚¬í•­ ë“±ë¡   â”‚  â”‚
â”‚      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
