# DualTetraX Services - Requirements Specification

**Version**: 1.0
**Date**: 2026-02-08
**Status**: Draft

---

## 1. Executive Summary

DualTetraX Services는 1,000개 이상의 DualTetraX 디바이스를 효율적으로 관리하고, 사용자에게 개인화된 미용 관리 서비스를 제공하는 클라우드 기반 플랫폼입니다.

### 1.1 핵심 목표
- **대규모 디바이스 관리**: 1,000개 이상의 디바이스를 실시간으로 모니터링 및 관리
- **개인화 서비스**: AI 기반 사용 패턴 분석 및 맞춤형 추천
- **데이터 인사이트**: 사용자 행동 분석을 통한 제품 개선
- **확장 가능한 아키텍처**: 향후 10,000개 이상의 디바이스로 확장 가능

### 1.2 대상 사용자
1. **일반 사용자** (End Users): DualTetraX 디바이스 소유자
2. **관리자** (Administrators): 시스템 운영 및 사용자 지원팀
3. **애널리스트** (Analysts): 데이터 분석 및 비즈니스 인텔리전스팀
4. **디바이스** (Devices): 모바일 앱을 통한 자동 데이터 동기화

---

## 2. Functional Requirements

### 2.1 사용자 관리 (User Management)

#### 2.1.1 회원가입 및 인증
- **FR-UM-001**: 이메일/비밀번호 기반 회원가입
  - 이메일 검증 필수
  - 비밀번호 강도 검증 (8자 이상, 영문/숫자/특수문자 조합)

- **FR-UM-002**: 소셜 로그인 지원
  - Google 로그인
  - Apple 로그인 (iOS)
  - Naver 로그인 (한국 사용자)
  - Kakao Talk 로그인 (한국 사용자)

- **FR-UM-003**: 2단계 인증 (2FA)
  - OTP 기반 추가 보안 (선택사항)

- **FR-UM-004**: 비밀번호 재설정
  - 이메일 기반 비밀번호 재설정
  - 문자 메시지(SMS) 기반 비밀번호 재설정
  - Kakao Talk 메시지를 통한 비밀번호 재설정 (한국 사용자)
  - 보안 질문 (선택사항)

#### 2.1.2 프로필 관리
- **FR-UM-005**: 사용자 프로필 정보
  - 이름, 프로필 이미지
  - 생년월일, 성별 (선택)
  - 피부 타입, 고민 사항 (개인화 서비스용)

- **FR-UM-006**: 알림 설정
  - 디바이스 알림 (배터리, 경고)
  - 마케팅 알림
  - 사용 리마인더

---

### 2.2 디바이스 관리 (Device Management)

#### 2.2.1 디바이스 등록 및 소유권
- **FR-DM-001**: 디바이스 등록
  - 시리얼 번호 기반 등록
  - QR 코드 스캔 등록
  - 1개 디바이스는 1명의 사용자에게만 등록 가능

- **FR-DM-002**: 디바이스 소유권 이전
  - 기존 사용자 등록 해제
  - 새 사용자 등록 (중고 거래 지원)

- **FR-DM-003**: 디바이스 목록 조회
  - 사용자의 모든 디바이스 목록
  - 디바이스별 상태 (연결됨, 마지막 연결 시간)
  - 펌웨어 버전

#### 2.2.2 디바이스 상태 모니터링
- **FR-DM-004**: 실시간 상태 동기화
  - 모바일 앱에서 BLE로 수집한 상태를 서버에 업로드
  - 배터리 상태, 경고 상태
  - 마지막 연결 시간

- **FR-DM-005**: 디바이스 펌웨어 관리
  - 현재 펌웨어 버전 추적
  - 사용 가능한 업데이트 알림
  - 펌웨어 업데이트 이력

#### 2.2.3 대량 디바이스 관리 (1,000개 이상)
- **FR-DM-006**: 관리자 디바이스 대시보드
  - 전체 디바이스 목록 (페이지네이션, 필터링)
  - 필터: 연결 상태, 펌웨어 버전, 마지막 연결 시간
  - 검색: 시리얼 번호, 사용자 이름, 이메일

- **FR-DM-007**: 디바이스 그룹화
  - 펌웨어 버전별 그룹
  - 사용 빈도별 그룹 (활성, 비활성)
  - 커스텀 태그 (예: 베타 테스터, VIP)

- **FR-DM-008**: 디바이스 이상 감지
  - 7일 이상 미연결 디바이스 알림
  - 배터리 경고 빈발 디바이스 식별
  - 온도 경고 빈발 디바이스 식별

- **FR-DM-009**: 디바이스 통계
  - 일별/주별/월별 활성 디바이스 수
  - 평균 사용 시간
  - 지역별 분포 (추후)

---

### 2.3 사용 데이터 관리 (Usage Data Management)

#### 2.3.1 사용 세션 수집
- **FR-UD-001**: 모바일 앱에서 사용 세션 업로드
  - BLE로 수집한 세션 데이터를 서버에 동기화
  - 오프라인 사용 후 일괄 업로드 지원
  - 중복 방지 (디바이스별 세션 ID)

- **FR-UD-002**: 세션 데이터 필드
  - Shot 타입 (U-Shot, E-Shot, LED)
  - 디바이스 모드 (Glow, Toneup, Renew, Clean, Firm, Line, Lift)
  - 레벨 (1, 2, 3)
  - 시작/종료 시간 (사용자 타임존 기준 저장)
  - 사용 시간, Pause 시간
  - 배터리 시작/종료 레벨
  - 경고 발생 여부
  - 위치 기반 환경 데이터 (동의 시):
    - 위도/경도 (대략적 위치)
    - 날씨 정보 (맑음, 흐림, 비 등)
    - 기온 (°C)
    - 습도 (%)
    - UV 지수
    - 미세먼지 농도 (선택)

#### 2.3.2 데이터 분석 및 통계
- **FR-UD-003**: 개인 통계 조회
  - 일별 사용 통계 (오늘, 어제, 선택한 날짜)
  - 주별 사용 통계 (이번 주, 지난주, 최근 4주)
  - 월별 사용 통계 (이번 달, 지난달, 최근 6개월)

- **FR-UD-004**: 사용 패턴 분석
  - Shot 타입별 사용 비율
  - 모드별 사용 비율
  - 레벨별 사용 비율
  - 시간대별 사용 패턴 (아침, 오후, 저녁)
  - 요일별 사용 패턴

- **FR-UD-005**: 사용 목표 설정
  - 주간 사용 목표 설정 (예: 주 3회 이상)
  - 목표 달성률 추적
  - 목표 달성 시 알림

- **FR-UD-006**: 사용 이력 조회
  - 세션 목록 (최신순)
  - 세션 상세 정보
  - 날짜 범위 필터링
  - CSV/PDF 내보내기

#### 2.3.3 데이터 관리
- **FR-UD-007**: 데이터 삭제
  - 개별 세션 삭제
  - 날짜 범위 삭제
  - 전체 데이터 삭제 (계정 삭제 시)

- **FR-UD-008**: 데이터 백업
  - 사용자 데이터 내보내기 (JSON, CSV)
  - GDPR 준수 (데이터 이동권)

---

### 2.4 개인화 서비스 (Personalization)

#### 2.4.1 AI 기반 추천
- **FR-PS-001**: 맞춤형 모드 추천
  - 사용자의 피부 타입 및 고민 사항 기반
  - 과거 사용 패턴 분석
  - 유사 사용자 그룹의 데이터 분석
  - 추천 모드 및 레벨 제안

- **FR-PS-002**: 사용 스케줄 추천
  - 사용 빈도 분석 (주 3회 이상 권장 등)
  - 최적 사용 시간대 제안
  - 사용 리마인더 푸시 알림

- **FR-PS-003**: 효과 추적
  - 사용 전/후 피부 상태 기록 (선택)
  - 사용 기간별 만족도 조사
  - 효과 개선 추이 그래프

#### 2.4.2 콘텐츠 추천
- **FR-PS-004**: 사용 가이드 추천
  - 사용자 레벨에 맞는 가이드 (초급, 중급, 고급)
  - 피부 타입별 가이드
  - 모드별 상세 사용법

- **FR-PS-005**: 커뮤니티 콘텐츠
  - 유사 사용자의 리뷰 및 팁
  - 인기 사용 패턴
  - 전문가 추천 루틴

#### 2.4.3 개인화 설정
- **FR-PS-006**: 피부 프로필 관리
  - 피부 타입 (건성, 지성, 복합성, 민감성)
  - 피부 고민 (주름, 탄력, 모공, 색소침착 등)
  - 연령대, 피부 상태 변화 기록

- **FR-PS-007**: 선호도 학습
  - 자주 사용하는 모드 자동 감지
  - 선호 레벨 추적
  - 사용 시간대 패턴 학습

---

### 2.5 관리자 기능 (Admin Features)

#### 2.5.1 사용자 관리
- **FR-AD-001**: 사용자 목록 조회
  - 전체 사용자 목록 (페이지네이션)
  - 검색: 이름, 이메일, 디바이스 시리얼
  - 필터: 가입일, 마지막 로그인, 활성 상태

- **FR-AD-002**: 사용자 상세 정보
  - 프로필 정보
  - 등록된 디바이스 목록
  - 사용 통계 요약
  - 최근 활동 로그

- **FR-AD-003**: 사용자 관리 기능
  - 계정 활성화/비활성화
  - 비밀번호 재설정 지원
  - 사용자 역할 변경 (일반, 베타, 관리자)

#### 2.5.2 시스템 모니터링
- **FR-AD-004**: 전체 시스템 대시보드
  - 총 사용자 수, 활성 사용자 수
  - 총 디바이스 수, 활성 디바이스 수
  - 오늘 동기화된 세션 수
  - API 호출 수, 에러율

- **FR-AD-005**: 사용 통계
  - 일별/주별/월별 신규 가입자
  - 일별/주별/월별 활성 사용자 (DAU/WAU/MAU)
  - Shot 타입별 인기도
  - 모드별 인기도

- **FR-AD-006**: 에러 및 경고 모니터링
  - 최근 API 에러 로그
  - 디바이스 경고 발생 빈도
  - 시스템 성능 메트릭

#### 2.5.3 콘텐츠 관리
- **FR-AD-007**: 공지사항 관리
  - 공지사항 작성/수정/삭제
  - 푸시 알림 발송
  - 대상 사용자 선택 (전체, 특정 그룹)

- **FR-AD-008**: 가이드 콘텐츠 관리
  - 사용 가이드 작성/편집
  - 이미지 및 비디오 업로드
  - 버전 관리

#### 2.5.4 분석 및 리포트
- **FR-AD-009**: 리포트 생성
  - 월간 사용 리포트 (PDF)
  - 사용자 행동 분석 리포트
  - 디바이스 상태 리포트

- **FR-AD-010**: 데이터 내보내기
  - 사용자 데이터 CSV 내보내기
  - 디바이스 데이터 CSV 내보내기
  - 세션 데이터 CSV 내보내기

---

### 2.6 웹 프론트엔드 (Web Frontend)

#### 2.6.1 공개 랜딩 페이지
- **FR-WF-001**: 제품 소개 페이지
  - DualTetraX 제품 설명
  - 주요 기능 및 스펙
  - 사용자 리뷰 및 평점

- **FR-WF-002**: 앱 다운로드
  - iOS App Store 링크
  - Android Play Store 링크
  - QR 코드 스캔

- **FR-WF-003**: 문서 및 지원
  - 사용 가이드
  - FAQ
  - 고객 지원 문의

#### 2.6.2 사용자 대시보드
- **FR-WF-004**: 웹 대시보드
  - 모바일 앱과 동일한 통계 조회
  - 사용 이력 조회
  - 프로필 설정

- **FR-WF-005**: 반응형 디자인
  - 데스크톱, 태블릿, 모바일 지원
  - 다크 모드 지원

#### 2.6.3 관리자 콘솔
- **FR-WF-006**: 관리자 전용 웹 콘솔
  - 대시보드 (2.5.2 참조)
  - 사용자 관리 (2.5.1 참조)
  - 디바이스 관리 (2.2.3 참조)
  - 콘텐츠 관리 (2.5.3 참조)

---

## 3. Non-Functional Requirements

### 3.1 성능 (Performance)
- **NFR-PF-001**: API 응답 시간
  - 평균 응답 시간 < 200ms
  - 95th percentile < 500ms
  - 99th percentile < 1s

- **NFR-PF-002**: 처리량
  - 초당 100개 이상의 API 요청 처리
  - 동시 접속자 1,000명 지원

- **NFR-PF-003**: 데이터베이스 쿼리
  - 복잡한 통계 쿼리 < 1s
  - 인덱싱을 통한 쿼리 최적화

### 3.2 확장성 (Scalability)
- **NFR-SC-001**: 수평 확장
  - 사용자 증가에 따른 자동 스케일링
  - 10,000개 이상의 디바이스 지원 가능

- **NFR-SC-002**: 데이터베이스 확장
  - Read Replica를 통한 읽기 성능 향상
  - Sharding 고려 (향후)

### 3.3 보안 (Security)
- **NFR-SE-001**: 데이터 암호화
  - 전송 중: HTTPS (TLS 1.3)
  - 저장 중: 데이터베이스 암호화

- **NFR-SE-002**: 인증/인가
  - JWT 기반 인증
  - 토큰 만료 시간 설정 (Access: 1시간, Refresh: 30일)
  - Rate Limiting (IP당 분당 100 요청)

- **NFR-SE-003**: 개인정보 보호
  - GDPR 준수
  - 개인정보 처리방침
  - 데이터 삭제권 보장

- **NFR-SE-004**: API 보안
  - CORS 설정
  - SQL Injection 방지
  - XSS 방지

### 3.4 가용성 (Availability)
- **NFR-AV-001**: 서비스 가동률
  - 99.9% uptime (월 43분 이하 다운타임)

- **NFR-AV-002**: 백업
  - 일일 자동 백업
  - Point-in-Time Recovery (PITR)
  - 백업 보관 기간: 30일

### 3.5 유지보수성 (Maintainability)
- **NFR-MN-001**: 코드 품질
  - TypeScript 타입 안정성
  - ESLint/Prettier 코드 포맷팅
  - Unit Test 커버리지 > 70%

- **NFR-MN-002**: 문서화
  - OpenAPI 3.0 기반 API 문서
  - README 및 개발 가이드
  - 아키텍처 다이어그램

- **NFR-MN-003**: 모니터링
  - 에러 로그 수집 (CloudWatch/Sentry)
  - 성능 메트릭 (APM)
  - 알림 설정 (Critical 에러, 성능 저하)

### 3.6 호환성 (Compatibility)
- **NFR-CP-001**: 모바일 앱 호환
  - Flutter 앱 (iOS 13+, Android 8+)

- **NFR-CP-002**: 웹 브라우저 호환
  - Chrome, Safari, Firefox, Edge (최신 2개 버전)

---

## 4. Data Requirements

### 4.1 데이터 볼륨 예측

#### 초기 단계 (6개월)
- 사용자: 500명
- 디바이스: 500개
- 일일 세션: 1,500개 (사용자당 평균 3회/일)
- 월간 세션: 45,000개
- 총 누적 세션: 270,000개
- 데이터베이스 크기: ~500MB

#### 성장 단계 (1년)
- 사용자: 2,000명
- 디바이스: 2,000개
- 일일 세션: 6,000개
- 월간 세션: 180,000개
- 총 누적 세션: 1,080,000개
- 데이터베이스 크기: ~2GB

#### 확장 단계 (2년)
- 사용자: 10,000명
- 디바이스: 10,000개
- 일일 세션: 30,000개
- 월간 세션: 900,000개
- 총 누적 세션: 10,800,000개
- 데이터베이스 크기: ~10GB

### 4.2 데이터 보관 정책
- **활성 데이터**: 최근 2년간 데이터 (실시간 조회)
- **아카이브**: 2년 이상 된 데이터 (S3 Glacier, 요청 시 조회)
- **로그 데이터**: 90일 보관
- **백업**: 30일 보관

---

## 5. Integration Requirements

### 5.1 모바일 앱 연동
- **IR-MA-001**: REST API 통신
  - JSON 포맷
  - JWT 인증

- **IR-MA-002**: 오프라인 동기화
  - 오프라인 사용 지원
  - 네트워크 복구 시 자동 동기화
  - 충돌 해결 (최신 데이터 우선)

### 5.2 외부 서비스 연동 (향후)
- **IR-ES-001**: 이메일 서비스
  - SendGrid/SES 연동
  - 회원가입 인증, 비밀번호 재설정

- **IR-ES-002**: 푸시 알림
  - FCM (Firebase Cloud Messaging)
  - APNs (Apple Push Notification service)

- **IR-ES-003**: 결제 (향후)
  - 프리미엄 기능 결제
  - Stripe/Toss Payments 연동

### 5.3 분석 도구 (선택)
- **IR-AN-001**: Google Analytics
  - 사용자 행동 추적
  - 유입 경로 분석

- **IR-AN-002**: Mixpanel/Amplitude
  - 제품 분석
  - Funnel 분석

### 5.4 날씨 API 연동
- **IR-WE-001**: OpenWeatherMap API (또는 유사 서비스)
  - 위치 기반 실시간 날씨 정보
  - 기온, 습도, UV 지수
  - 미세먼지 데이터 (선택)

---

## 5.5 개인정보 보호 및 동의 관리

### 5.5.1 데이터 수집 동의
- **FR-PR-001**: 개인정보 수집 동의
  - 필수 동의: 서비스 이용 약관, 개인정보 처리방침
  - 선택 동의: 마케팅 수신, 위치 기반 서비스, 제3자 정보 제공
  - 동의 일시 기록 (날짜 및 시간)
  - 동의 철회 기능
  - 동의 이력 조회

- **FR-PR-002**: 위치 정보 수집 동의
  - 사용 전 명시적 동의 요청
  - 동의 내용: "디바이스 사용 시 위치 정보를 수집하여 날씨, 습도 등 환경 데이터를 기록합니다."
  - 동의 거부 시에도 기본 기능 사용 가능 (위치 데이터만 제외)
  - 동의 일시: 날짜, 시간, 앱 버전, OS 버전 기록

- **FR-PR-003**: 개인정보 보호 조치
  - 개인정보와 분석 데이터 분리 (pii_schema vs analytics_schema)
  - 익명화된 사용자 ID (pseudo_user_id) 사용
  - 위치 정보 정확도 제한 (대략적 위치만 저장, 정확한 GPS 좌표 저장 안 함)
  - 개인정보 접근 로그 기록

### 5.5.2 시간대 관리
- **FR-TZ-001**: 사용자 타임존 설정
  - 회원가입 시 자동 감지 (디바이스 설정 기준)
  - 사용자가 수동으로 변경 가능
  - 모든 시간 데이터는 사용자 타임존으로 표시

- **FR-TZ-002**: 시간 데이터 저장
  - 데이터베이스: UTC+Timezone으로 저장 (TIMESTAMP WITH TIME ZONE)
  - API 응답: 사용자 타임존으로 변환하여 반환
  - 통계 집계: 사용자 타임존 기준 (일별/주별/월별)

- **FR-TZ-003**: 관리자 페이지 시간 표시
  - 관리자의 타임존 기준으로 표시
  - 원본 UTC 시간도 함께 표시 (tooltip)
  - 여러 타임존 사용자 비교 시 UTC 기준 정렬

### 5.5.3 GDPR 및 개인정보 보호법 준수
- **FR-PR-004**: 데이터 열람권
  - 사용자가 본인의 모든 데이터를 JSON/CSV 형식으로 다운로드 가능
  - 개인정보, 디바이스 정보, 사용 이력 포함

- **FR-PR-005**: 데이터 삭제권 (Right to be Forgotten)
  - 사용자가 계정 삭제 시 모든 개인정보 삭제
  - 익명화된 데이터는 통계 목적으로 보관 가능 (개인 식별 불가능)
  - 삭제 요청 후 30일 이내 처리

- **FR-PR-006**: 데이터 이동권
  - 사용자가 다른 서비스로 데이터 이전 가능하도록 표준 형식(JSON) 제공

---

## 6. Constraints and Assumptions

### 6.1 제약사항
- **스타트업 예산**: 초기 월 운영 비용 < $50
- **개발 기간**: MVP 3개월 이내 완료
- **개발 인력**: 1-2명 (풀스택 개발자)

### 6.2 가정사항
- 사용자는 DualTetraX 디바이스를 이미 소유하고 있음
- 모바일 앱을 통해서만 디바이스와 연결 (BLE)
- 인터넷 연결이 있는 환경에서 사용

---

## 7. Success Criteria

### 7.1 비즈니스 목표
- 6개월 내 500명 이상 가입
- 월간 활성 사용자 (MAU) 70% 이상
- 평균 주간 사용 빈도 3회 이상
- 사용자 만족도 4.0/5.0 이상

### 7.2 기술 목표
- API 응답 시간 < 200ms
- 서비스 가동률 99.9% 이상
- 데이터 동기화 성공률 99% 이상
- 모바일 앱 크래시율 < 1%

---

## 8. Future Enhancements

### 8.1 Phase 2 (6개월 후)
- AI 기반 피부 진단 (카메라 분석)
- 사용 전/후 사진 비교
- 커뮤니티 기능 (리뷰, Q&A)
- 프리미엄 구독 모델

### 8.2 Phase 3 (1년 후)
- 다국어 지원 (영어, 일본어, 중국어)
- B2B 기능 (뷰티샵, 피부과 연동)
- 전문가 상담 예약
- 웨어러블 디바이스 연동 (Apple Watch)

---

## 9. Glossary

- **BLE**: Bluetooth Low Energy, 저전력 블루투스
- **Session**: 디바이스 사용 세션 (시작부터 종료까지)
- **MAU**: Monthly Active Users, 월간 활성 사용자
- **DAU**: Daily Active Users, 일일 활성 사용자
- **JWT**: JSON Web Token, 인증 토큰
- **GDPR**: General Data Protection Regulation, 유럽 개인정보 보호법

---

## 10. Approval

| Role | Name | Date | Signature |
|------|------|------|-----------|
| Product Owner | - | 2026-02-08 | - |
| Technical Lead | - | 2026-02-08 | - |
| Stakeholder | - | 2026-02-08 | - |

---

**Document End**
